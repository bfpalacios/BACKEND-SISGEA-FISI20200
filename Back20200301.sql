CREATE DATABASE  IF NOT EXISTS `sisgea` /*!40100 DEFAULT CHARACTER SET utf8 */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `sisgea`;
-- MySQL dump 10.13  Distrib 8.0.16, for Win64 (x86_64)
--
-- Host: 18.191.197.188    Database: sisgea
-- ------------------------------------------------------
-- Server version	8.0.19

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
 SET NAMES utf8 ;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `MAE_CURSO`
--

DROP TABLE IF EXISTS `MAE_CURSO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_CURSO` (
  `ID_PLAN` varchar(20) NOT NULL,
  `ID_CURSO` varchar(20) NOT NULL,
  `CICLO` int DEFAULT NULL,
  `ESPECIALIDAD` varchar(20) DEFAULT NULL,
  `DESCRIPCION` varchar(100) DEFAULT NULL,
  `CREDITAJE` decimal(5,2) DEFAULT NULL,
  `TIPO` varchar(4) DEFAULT NULL,
  `GRUPO` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`ID_CURSO`),
  KEY `fk_MAE_CURSO_PLAN_MAE_PLAN_ESTUDIO_idx` (`ID_PLAN`),
  CONSTRAINT `fk_MAE_CURSO_PLAN_MAE_PLAN_ESTUDIO` FOREIGN KEY (`ID_PLAN`) REFERENCES `MAE_PLAN` (`id_plan`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_CURSO`
--

LOCK TABLES `MAE_CURSO` WRITE;
/*!40000 ALTER TABLE `MAE_CURSO` DISABLE KEYS */;
INSERT INTO `MAE_CURSO` (`ID_PLAN`, `ID_CURSO`, `CICLO`, `ESPECIALIDAD`, `DESCRIPCION`, `CREDITAJE`, `TIPO`, `GRUPO`) VALUES ('2014','2010101',1,'0','TEORIA GENERAL DE SISTEMAS',3.00,'O','-'),('2014','2010102',1,'0','COMUNICACIÓN Y DINAMICA GRUPO',2.00,'O','-'),('2014','2010103',1,'0','INTRODUCCIÓN A LA COMPUTACIÓN',4.00,'O','-'),('2014','2010104',1,'0','CALCULO I',4.00,'O','-'),('2014','2010105',1,'0','MATEMÁTICA BÁSICA I',4.00,'O','-'),('2014','2010106',1,'0','ETICA DE LA PROFESION',2.00,'O','-'),('2014','2010107',1,'0','ESTRATEGIAS DE APRENDIZAJE E INVESTIGACIÓN',2.00,'O','-'),('2014','2010201',2,'0','ECONOMIA',2.00,'O','-'),('2014','2010202',2,'0','CREATIVIDAD Y LIDERAZGO',2.00,'O','-'),('2014','2010203',2,'0','ALGORITMICA I',4.00,'O','-'),('2014','2010204',2,'0','CÁLCULO II',4.00,'O','-'),('2014','2010205',2,'0','FISICA GENERAL I',4.00,'O','-'),('2014','2010206',2,'0','MATEMATICA BASICA II',4.00,'O','-'),('2014','2010207',2,'0','REALIDAD NACIONAL',2.00,'O','-'),('2014','2010301',3,'0','ORGANIZACIÓN Y ADMINISTRACIÓN',2.00,'O','-'),('2014','2010302',3,'0','ALGORÍTMICA II',4.00,'O','-'),('2014','2010303',3,'0','CÁLCULO III',4.00,'O','-'),('2014','2010304',3,'0','PROBABILIDADES Y ESTADÍSTICA',4.00,'O','-'),('2014','2010305',3,'0','FISICA GENERAL II',4.00,'O','-'),('2014','2010306',3,'0','MATEMÁTICA DISCRETA',4.00,'O','-'),('2014','2010401',4,'0','PROCESOS DE NEGOCIOS',4.00,'O','-'),('2014','2010402',4,'0','ESTRUCTURA DE DATOS',4.00,'O','-'),('2014','2010403',4,'0','CONTABILIDAD GENERAL',2.00,'O','-'),('2014','2010404',4,'0','SERIES Y ECUACIONES DIFERENCIALES',3.00,'O','-'),('2014','2010405',4,'0','LENGUAJES Y COMPILADORES',3.00,'O','-'),('2014','2010406',4,'0','SISTEMAS DIGITALES',4.00,'O','-'),('2014','2010501',5,'0','ANÁLISIS DE SISTEMAS DE INFORMACIÓN',3.00,'O','-'),('2014','2010502',5,'0','BASE DE DATOS I',4.00,'O','-'),('2014','2010503',5,'0','INGENIERÍA ECONÓMICA',2.00,'O','-'),('2014','2010504',5,'0','MÉTODOS NUMERICOS',3.00,'O','-'),('2014','2010505',5,'0','ALGORÍTMICA III',3.00,'O','-'),('2014','2010506',5,'0','ARQUITECTURA DE COMPUTADORAS',3.00,'O','-'),('2014','2010507',5,'0','SISTEMAS OPERATIVOS',3.00,'O','-'),('2014','2010601',6,'0','DISEÑO DE SISTEMAS DE INFORMACIÓN',3.00,'O','-'),('2014','2010602',6,'0','BASE DE DATOS II',3.00,'O','-'),('2014','2010603',6,'0','GESTIÓN DE LOS PROCESOS DE NEGOCIOS',3.00,'O','-'),('2014','2010604',6,'0','COMPUTACIÓN VISUAL',3.00,'O','-'),('2014','2010605',6,'0','INTELIGENCIA ARTIFICIAL',3.00,'O','-'),('2014','2010606',6,'0','REDES Y TRANSMISIÓN DE DATOS',3.00,'O','-'),('2014','2010607',6,'0','INVESTIGACIÓN OPERATIVA I',3.00,'O','-'),('2014','2010701',7,'0','INTERFACE HOMBRE COMPUTADOR',3.00,'O','-'),('2014','2010702',7,'0','PATRONES DE CONSTRUCCIÓN DE SISTEMAS',2.00,'O','-'),('2014','2010703',7,'0','FINANZAS PARA LA GESTIÓN',2.00,'O','-'),('2014','2010704',7,'0','BASE DE DATOS III',3.00,'O','-'),('2014','2010705',7,'0','INFRAESTRUCTURA Y SEGURIDAD EN REDES',3.00,'O','-'),('2014','2010706',7,'0','PROGRAMACIÓN PARALELA',3.00,'O','-'),('2014','2010707',7,'0','INVESTIGACIÓN OPERATIVA II',3.00,'O','-'),('2014','2010801',8,'0','COMPUTACIÓN FÍSICA',3.00,'O','-'),('2014','2010802',8,'0','PROYECTO DE TESIS',3.00,'O','-'),('2014','2010803',8,'0','GESTION DE SEGURIDAD Y RIESGO DE TECNOLOGIA DE INFORMACIÓN',3.00,'O','-'),('2014','2010804',8,'0','GERENCIA DE PROYECTOS DE INFORMACIÓN',3.00,'O','-'),('2014','2010805',8,'0','ADQUISICIÓN, ADMINISTRACIÓN Y ESTRATÉGIA DE SISTEMAS DE INFORMACIÓN',3.00,'O','-'),('2014','2010806',8,'0','TALLER DE CONSTRUCCIÓN DE SISTEMAS',3.00,'O','-'),('2014','2010807',8,'0','MARKETING',3.00,'O','-'),('2014','2010901',9,'0','DESARROLLO DE TESIS I',3.00,'O','-'),('2014','2010902',9,'0','SISTEMAS DISTRIBUIDOS',3.00,'O','-'),('2014','2010903',9,'0','DERECHO INFORMÁTICO',2.00,'O','-'),('2014','2010904',9,'0','AUDITORIA Y CONTROL DE TECNOLOGÍA DE INFORMATICA',3.00,'O','-'),('2014','2010905',9,'0','CALIDAD Y PRUEBA DE SOFTWARE',3.00,'O','-'),('2014','2010906',9,'0','ARQUITECTURA EMPRESARIAL',3.00,'O','-'),('2014','2011001',10,'0','DESARROLLO DE TESIS II',3.00,'O','-'),('2014','2011002',10,'0','INTEGRACIÓN DE SISTEMAS',3.00,'O','-'),('2014','2011003',10,'0','SISTEMAS EMPRESARIALES',3.00,'O','-'),('2014','2011004',10,'0','DESARROLLO DE APLICACIONES DISTRIBUIDAS',2.00,'O','-'),('2014','2011005',10,'0','GERENCIA INFORMÁTICA',3.00,'O','-'),('2014','2011006',10,'0','TENDENCIAS EN SISTEMAS DE INFORMACIÓN',2.00,'O','-'),('2014','2011101',0,'0','REDES NEURONALES',3.00,'E','GE'),('2014','2011102',0,'0','APLICACIÓN DE ARQUITECTURA EMPRESARIAL',3.00,'E','GE'),('2014','2011103',0,'0','INGENIERÍA DE CONTROL',3.00,'E','GE'),('2014','2011104',0,'0','INGENIERÍA WEB',3.00,'E','GE'),('2014','2011105',0,'0','GESTIÓN DEL CONOCIMIENTO',3.00,'E','GE'),('2014','2011106',0,'0','NEGOCIOS ELECTRÓNICOS',3.00,'E','GE'),('2014','2011107',0,'0','SISTEMAS DE INFORMACIÓN GEOGRÁFICOS',3.00,'E','GE'),('2014','2011108',0,'0','INTELIGENCIA DE NEGOCIOS',3.00,'E','GE'),('2014','2011109',0,'0','ROBÓTICA',3.00,'E','GE'),('2014','2011110',0,'0','SISTEMAS INTELIGENTES',3.00,'E','GE'),('2014','2011112',0,'0','DANZAS I',1.00,'AL','GAC'),('2014','2011113',0,'0','TEATRO I',1.00,'AL','GAC'),('2014','2011114',0,'0','MÚSICA I',1.00,'AL','GAC'),('2014','2011115',0,'0','ORATORIA I',1.00,'AL','GAC'),('2014','2011116',0,'0','DEPORTE Y RECREACIÓN I',1.00,'AL','GAC'),('2014','2011117',0,'0','DANZAS II',1.00,'AL','GAC'),('2014','2011118',0,'0','TEATRO II',1.00,'AL','GAC'),('2014','2011119',0,'0','MÚSICA II',1.00,'AL','GAC'),('2014','2011120',0,'0','ORATORIA II',1.00,'AL','GAC'),('2014','2011121',0,'0','DEPORTE Y RECREACIÓN II',1.00,'AL','GAC');
/*!40000 ALTER TABLE `MAE_CURSO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_DOCENTE`
--

DROP TABLE IF EXISTS `MAE_DOCENTE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_DOCENTE` (
  `ID_DOCENTE` varchar(20) NOT NULL,
  `NOMBRES` varchar(40) DEFAULT NULL,
  `APELLIDOS` varchar(40) DEFAULT NULL,
  `TIPO` varchar(4) DEFAULT NULL,
  PRIMARY KEY (`ID_DOCENTE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_DOCENTE`
--

LOCK TABLES `MAE_DOCENTE` WRITE;
/*!40000 ALTER TABLE `MAE_DOCENTE` DISABLE KEYS */;
INSERT INTO `MAE_DOCENTE` (`ID_DOCENTE`, `NOMBRES`, `APELLIDOS`, `TIPO`) VALUES ('--','--','-- --','E'),('010162','JAVIER ELMER','CABRERA DIAZ','I'),('028428','VICTOR RAMON','GARCIA HERBOZO','I'),('04055A','LUCIO','MALASQUEZ RUIZ','I'),('051934','JAIME','PARIONA QUISPE','I'),('053449','JOSE','PIEDRA ISUSQUI','I'),('08954E','NORBERTO ULISES','ROMAN CONCHA','I'),('089575','GILBERTO ANIBAL','SALINAS AZAÑA','I'),('091081','LUIS','ALARCON LOAYZA','I'),('095702','VICTOR','BUSTAMANTE OLIVERA','I'),('09571E','JOHN LEDGARD','TRUJILLO TREJO','I'),('095729','JORGE LUIS','CHAVEZ SOTO','I'),('096385','SANTIAGO ESTEBAN','CONTRERAS ARANDA','I'),('098329','CESAR','LUZA MONTERO','I'),('099589','FELIX','FERMIN PEREZ','I'),('0A0040','GABRIEL','SOLARI CARBAJAL','I'),('0A0283','RUBEN ORLANDO','ARBAÑIL RIVADENEIRA','I'),('0A0314','ARMANDO DAVID','ESPINOZA ROBLES','I'),('0A1236','CESAR ALBERTO','MOLINA NEYRA','I'),('0A1419','ADOLFO MARCOS','SOTELO BEDON','I'),('0A1607','JAVIER ARTURO','GAMBOA CRUZADO','I'),('0A1608','NORBERTO ANTONIO','OSORIO BELTRAN','I'),('0A1610','SANTIAGO DOMINGO','MOQUILLAZA HENRIQUEZ','I'),('0A2078','CARLOS','ORTEGA MUÑOZ','I'),('0A4149','MARÍA ELIZABETH','PUELLES BULNES','I'),('0A4523','SERGIO PAULO','VALCARCEL ASCENCIOS','I');
/*!40000 ALTER TABLE `MAE_DOCENTE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_ESPACIO_ACADEMICO`
--

DROP TABLE IF EXISTS `MAE_ESPACIO_ACADEMICO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_ESPACIO_ACADEMICO` (
  `ID_ESPACIO_ACADEMICO` int NOT NULL,
  `DESCRIPCION` varchar(100) DEFAULT NULL,
  `AFORO` int DEFAULT NULL,
  `PABELLON` varchar(2) DEFAULT NULL,
  `TIPO_ESPACIO` varchar(4) DEFAULT NULL,
  `ASIGNABLE` int DEFAULT NULL,
  PRIMARY KEY (`ID_ESPACIO_ACADEMICO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_ESPACIO_ACADEMICO`
--

LOCK TABLES `MAE_ESPACIO_ACADEMICO` WRITE;
/*!40000 ALTER TABLE `MAE_ESPACIO_ACADEMICO` DISABLE KEYS */;
INSERT INTO `MAE_ESPACIO_ACADEMICO` (`ID_ESPACIO_ACADEMICO`, `DESCRIPCION`, `AFORO`, `PABELLON`, `TIPO_ESPACIO`, `ASIGNABLE`) VALUES (11,'LABORATORIO 1',30,'1','L',1),(1101,'AULA 101',35,'1','A',1);
/*!40000 ALTER TABLE `MAE_ESPACIO_ACADEMICO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_HORARIO`
--

DROP TABLE IF EXISTS `MAE_HORARIO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_HORARIO` (
  `ID_HORARIO` int NOT NULL AUTO_INCREMENT,
  `ID_CURSO` varchar(20) NOT NULL,
  `SECCION` int NOT NULL,
  `DIA` varchar(4) DEFAULT NULL,
  `HORARIO_INICIO` varchar(8) DEFAULT NULL,
  `HORARIO_FIN` varchar(8) DEFAULT NULL,
  PRIMARY KEY (`ID_HORARIO`,`ID_CURSO`,`SECCION`),
  KEY `fk_MAE_HORARIO_MAE_PROGRAMACION1_idx` (`SECCION`,`ID_CURSO`),
  CONSTRAINT `fk_MAE_HORARIO_MAE_PROGRAMACION1` FOREIGN KEY (`SECCION`, `ID_CURSO`) REFERENCES `MAE_PROGRAMACION` (`SECCION`, `ID_CURSO`)
) ENGINE=InnoDB AUTO_INCREMENT=66 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_HORARIO`
--

LOCK TABLES `MAE_HORARIO` WRITE;
/*!40000 ALTER TABLE `MAE_HORARIO` DISABLE KEYS */;
INSERT INTO `MAE_HORARIO` (`ID_HORARIO`, `ID_CURSO`, `SECCION`, `DIA`, `HORARIO_INICIO`, `HORARIO_FIN`) VALUES (1,'2010302',1,'VI','8:00:00','13:00:00'),(2,'2010302',1,'MI','8:00:00','13:00:00'),(3,'2010302',2,'LU','14:00:00','19:00:00'),(4,'2010302',2,'MI','14:00:00','19:00:00'),(5,'2010304',1,'MI','15:00:00','19:00:00'),(6,'2010304',1,'LU','15:00:00','19:00:00'),(7,'2010401',1,'MA','8:00:00','13:00:00'),(8,'2010401',1,'MA','14:00:00','19:00:00'),(9,'2010402',1,'LU','8:00:00','13:00:00'),(10,'2010402',1,'MI','8:00:00','13:00:00'),(11,'2010404',1,'JU','8:00:00','19:00:00'),(12,'2010405',1,'MI','18:00:00','22:00:00'),(13,'2010405',1,'SA','9:00:00','13:00:00'),(14,'2010405',2,'MI','18:00:00','22:00:00'),(15,'2010405',2,'SA','9:00:00','13:00:00'),(16,'2010406',1,'MA','8:00:00','13:00:00'),(17,'2010406',1,'MI','8:00:00','13:00:00'),(18,'2010502',1,'MA','8:00:00','13:00:00'),(19,'2010502',1,'VI','8:00:00','13:00:00'),(20,'2010504',1,'LU','10:00:00','14:00:00'),(21,'2010504',1,'MI','10:00:00','14:00:00'),(22,'2010505',1,'LU','8:00:00','13:00:00'),(23,'2010505',1,'MI','8:00:00','13:00:00'),(24,'2010507',1,'MA','13:00:00','18:00:00'),(25,'2010507',1,'JU','13:00:00','18:00:00'),(26,'2010601',1,'MA','17:00:00','21:00:00'),(27,'2010601',1,'JU','17:00:00','21:00:00'),(28,'2010602',1,'MA','8:00:00','12:00:00'),(29,'2010602',1,'JU','8:00:00','12:00:00'),(30,'2010604',1,'LU','18:00:00','22:00:00'),(31,'2010604',1,'MI','18:00:00','22:00:00'),(32,'2010605',1,'MA','18:00:00','22:00:00'),(33,'2010605',1,'JU','18:00:00','22:00:00'),(34,'2010606',1,'LU','15:00:00','19:00:00'),(35,'2010606',1,'MI','15:00:00','19:00:00'),(36,'2010606',2,'LU','18:00:00','22:00:00'),(37,'2010606',2,'MI','18:00:00','22:00:00'),(38,'2010607',1,'JU','18:00:00','22:00:00'),(39,'2010607',1,'SA','8:00:00','12:00:00'),(40,'2010607',2,'LU','14:00:00','18:00:00'),(41,'2010607',2,'VI','14:00:00','18:00:00'),(42,'2010701',1,'MA','18:00:00','22:00:00'),(43,'2010701',1,'SA','8:00:00','12:00:00'),(44,'2010703',1,'MA','14:00:00','17:00:00'),(45,'2010703',1,'JU','14:00:00','17:00:00'),(46,'2010705',1,'LU','19:00:00','22:00:00'),(47,'2010705',1,'MI','19:00:00','22:00:00'),(48,'2010706',1,'MA','18:00:00','22:00:00'),(49,'2010706',1,'JU','18:00:00','22:00:00'),(50,'2010707',1,'VI','17:00:00','22:00:00'),(51,'2010707',1,'SA','14:00:00','19:00:00'),(52,'2010707',2,'LU','18:00:00','22:00:00'),(53,'2010707',2,'VI','18:00:00','22:00:00'),(54,'2010806',1,'MI','18:00:00','22:00:00'),(55,'2010806',1,'LU','18:00:00','22:00:00'),(56,'2010902',1,'MA','17:00:00','22:00:00'),(57,'2010902',1,'JU','17:00:00','22:00:00'),(58,'2010904',1,'MI','16:00:00','22:00:00'),(59,'2011002',1,'MA','18:00:00','22:00:00'),(60,'2011002',1,'JU','18:00:00','22:00:00'),(61,'2011004',1,'VI','13:00:00','17:00:00'),(62,'2011004',1,'SA','13:00:00','17:00:00'),(63,'2011006',1,'LU','18:00:00','22:00:00'),(64,'2011105',1,'VI','18:00:00','22:00:00'),(65,'2011105',1,'MI','18:00:00','22:00:00');
/*!40000 ALTER TABLE `MAE_HORARIO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_HORARIO_DETALLE`
--

DROP TABLE IF EXISTS `MAE_HORARIO_DETALLE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_HORARIO_DETALLE` (
  `ID_HORARIO_DETALLE` int NOT NULL AUTO_INCREMENT,
  `ID_CURSO` varchar(20) NOT NULL,
  `SECCION` int NOT NULL,
  `ID_HORARIO` int NOT NULL,
  `TIPO_HORARIO` varchar(45) DEFAULT NULL,
  `HORARIO_INICIO` varchar(8) DEFAULT NULL,
  `HORARIO_FIN` varchar(8) DEFAULT NULL,
  PRIMARY KEY (`ID_HORARIO_DETALLE`,`ID_CURSO`,`SECCION`,`ID_HORARIO`),
  KEY `fk_MAE_HORARIO_DETALLE_MAE_HORARIO1_idx` (`ID_HORARIO`,`ID_CURSO`,`SECCION`),
  CONSTRAINT `fk_MAE_HORARIO_DETALLE_MAE_HORARIO1` FOREIGN KEY (`ID_HORARIO`, `ID_CURSO`, `SECCION`) REFERENCES `MAE_HORARIO` (`ID_HORARIO`, `ID_CURSO`, `SECCION`)
) ENGINE=InnoDB AUTO_INCREMENT=131 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_HORARIO_DETALLE`
--

LOCK TABLES `MAE_HORARIO_DETALLE` WRITE;
/*!40000 ALTER TABLE `MAE_HORARIO_DETALLE` DISABLE KEYS */;
INSERT INTO `MAE_HORARIO_DETALLE` (`ID_HORARIO_DETALLE`, `ID_CURSO`, `SECCION`, `ID_HORARIO`, `TIPO_HORARIO`, `HORARIO_INICIO`, `HORARIO_FIN`) VALUES (1,'2010302',1,1,'T','8:00:00','11:00:00'),(2,'2010302',1,1,'L','11:00:00','13:00:00'),(3,'2010302',1,2,'T','8:00:00','11:00:00'),(4,'2010302',1,2,'L','11:00:00','13:00:00'),(5,'2010302',2,3,'T','14:00:00','17:00:00'),(6,'2010302',2,3,'L','17:00:00','19:00:00'),(7,'2010302',2,4,'T','14:00:00','17:00:00'),(8,'2010302',2,4,'L','17:00:00','19:00:00'),(9,'2010304',1,5,'T','15:00:00','17:00:00'),(10,'2010304',1,5,'P','17:00:00','19:00:00'),(11,'2010304',1,6,'T','15:00:00','17:00:00'),(12,'2010304',1,6,'P','17:00:00','19:00:00'),(13,'2010401',1,7,'T','8:00:00','11:00:00'),(14,'2010401',1,7,'L','11:00:00','13:00:00'),(15,'2010401',1,8,'T','14:00:00','17:00:00'),(16,'2010401',1,8,'L','17:00:00','19:00:00'),(17,'2010402',1,9,'T','8:00:00','11:00:00'),(18,'2010402',1,9,'L','11:00:00','13:00:00'),(19,'2010402',1,10,'T','8:00:00','11:00:00'),(20,'2010402',1,10,'L','11:00:00','13:00:00'),(21,'2010404',1,11,'T','8:00:00','17:00:00'),(22,'2010404',1,11,'P','17:00:00','19:00:00'),(23,'2010405',1,12,'T','18:00:00','20:00:00'),(24,'2010405',1,12,'L','20:00:00','22:00:00'),(25,'2010405',1,13,'T','9:00:00','11:00:00'),(26,'2010405',1,13,'L','11:00:00','13:00:00'),(27,'2010405',2,14,'T','18:00:00','20:00:00'),(28,'2010405',2,14,'L','20:00:00','22:00:00'),(29,'2010405',2,15,'T','9:00:00','11:00:00'),(30,'2010405',2,15,'L','11:00:00','13:00:00'),(31,'2010406',1,16,'T','8:00:00','11:00:00'),(32,'2010406',1,16,'L','11:00:00','13:00:00'),(33,'2010406',1,17,'T','8:00:00','11:00:00'),(34,'2010406',1,17,'L','11:00:00','13:00:00'),(35,'2010502',1,18,'T','8:00:00','11:00:00'),(36,'2010502',1,18,'L','11:00:00','13:00:00'),(37,'2010502',1,19,'T','8:00:00','11:00:00'),(38,'2010502',1,19,'L','11:00:00','13:00:00'),(39,'2010504',1,20,'T','10:00:00','12:00:00'),(40,'2010504',1,20,'L','12:00:00','14:00:00'),(41,'2010504',1,21,'T','10:00:00','12:00:00'),(42,'2010504',1,21,'L','12:00:00','14:00:00'),(43,'2010505',1,22,'T','8:00:00','11:00:00'),(44,'2010505',1,22,'L','11:00:00','13:00:00'),(45,'2010505',1,23,'T','8:00:00','11:00:00'),(46,'2010505',1,23,'L','11:00:00','13:00:00'),(47,'2010507',1,24,'T','13:00:00','16:00:00'),(48,'2010507',1,24,'L','16:00:00','18:00:00'),(49,'2010507',1,25,'T','13:00:00','16:00:00'),(50,'2010507',1,25,'L','16:00:00','18:00:00'),(51,'2010601',1,26,'T','17:00:00','19:00:00'),(52,'2010601',1,26,'L','19:00:00','21:00:00'),(53,'2010601',1,27,'T','17:00:00','19:00:00'),(54,'2010601',1,27,'L','19:00:00','21:00:00'),(55,'2010602',1,28,'T','8:00:00','10:00:00'),(56,'2010602',1,28,'L','10:00:00','12:00:00'),(57,'2010602',1,29,'T','8:00:00','10:00:00'),(58,'2010602',1,29,'L','10:00:00','12:00:00'),(59,'2010604',1,30,'T','18:00:00','20:00:00'),(60,'2010604',1,30,'P','20:00:00','22:00:00'),(61,'2010604',1,31,'T','18:00:00','20:00:00'),(62,'2010604',1,31,'P','20:00:00','22:00:00'),(63,'2010605',1,32,'T','18:00:00','20:00:00'),(64,'2010605',1,32,'L','20:00:00','22:00:00'),(65,'2010605',1,33,'T','18:00:00','20:00:00'),(66,'2010605',1,33,'L','20:00:00','22:00:00'),(67,'2010606',1,34,'T','15:00:00','17:00:00'),(68,'2010606',1,34,'L','17:00:00','19:00:00'),(69,'2010606',1,35,'T','15:00:00','17:00:00'),(70,'2010606',1,35,'L','17:00:00','19:00:00'),(71,'2010606',2,36,'T','18:00:00','20:00:00'),(72,'2010606',2,36,'L','20:00:00','22:00:00'),(73,'2010606',2,37,'T','18:00:00','20:00:00'),(74,'2010606',2,37,'L','20:00:00','22:00:00'),(75,'2010607',1,38,'T','18:00:00','20:00:00'),(76,'2010607',1,38,'P','20:00:00','22:00:00'),(77,'2010607',1,39,'T','8:00:00','10:00:00'),(78,'2010607',1,39,'P','10:00:00','12:00:00'),(79,'2010607',2,40,'T','14:00:00','16:00:00'),(80,'2010607',2,40,'P','16:00:00','18:00:00'),(81,'2010607',2,41,'T','14:00:00','16:00:00'),(82,'2010607',2,41,'P','16:00:00','18:00:00'),(83,'2010701',1,42,'T','18:00:00','20:00:00'),(84,'2010701',1,42,'L','20:00:00','22:00:00'),(85,'2010701',1,43,'T','8:00:00','10:00:00'),(86,'2010701',1,43,'L','10:00:00','12:00:00'),(87,'2010703',1,44,'T','14:00:00','15:00:00'),(88,'2010703',1,44,'L','15:00:00','17:00:00'),(89,'2010703',1,45,'T','14:00:00','15:00:00'),(90,'2010703',1,45,'L','15:00:00','17:00:00'),(91,'2010705',1,46,'T','19:00:00','20:00:00'),(92,'2010705',1,46,'L','20:00:00','22:00:00'),(93,'2010705',1,47,'T','19:00:00','20:00:00'),(94,'2010705',1,47,'L','20:00:00','22:00:00'),(95,'2010706',1,48,'T','18:00:00','20:00:00'),(96,'2010706',1,48,'L','20:00:00','22:00:00'),(97,'2010706',1,49,'T','18:00:00','20:00:00'),(98,'2010706',1,49,'L','20:00:00','22:00:00'),(99,'2010707',1,50,'T','17:00:00','20:00:00'),(100,'2010707',1,50,'P','20:00:00','22:00:00'),(101,'2010707',1,51,'T','14:00:00','17:00:00'),(102,'2010707',1,51,'P','17:00:00','19:00:00'),(103,'2010707',2,52,'T','18:00:00','20:00:00'),(104,'2010707',2,52,'P','20:00:00','22:00:00'),(105,'2010707',2,53,'T','18:00:00','20:00:00'),(106,'2010707',2,53,'P','20:00:00','22:00:00'),(107,'2010806',1,54,'T','18:00:00','20:00:00'),(108,'2010806',1,54,'L','20:00:00','22:00:00'),(109,'2010806',1,55,'T','18:00:00','20:00:00'),(110,'2010806',1,55,'L','20:00:00','22:00:00'),(111,'2010902',1,56,'T','17:00:00','20:00:00'),(112,'2010902',1,56,'L','20:00:00','22:00:00'),(113,'2010902',1,57,'T','17:00:00','20:00:00'),(114,'2010902',1,57,'L','20:00:00','22:00:00'),(115,'2010904',1,58,'T','16:00:00','20:00:00'),(116,'2010904',1,58,'L','20:00:00','22:00:00'),(117,'2011002',1,59,'T','18:00:00','20:00:00'),(118,'2011002',1,59,'L','20:00:00','22:00:00'),(119,'2011002',1,60,'T','18:00:00','20:00:00'),(120,'2011002',1,60,'L','20:00:00','22:00:00'),(121,'2011004',1,61,'T','13:00:00','15:00:00'),(122,'2011004',1,61,'L','15:00:00','17:00:00'),(123,'2011004',1,62,'T','13:00:00','15:00:00'),(124,'2011004',1,62,'L','15:00:00','17:00:00'),(125,'2011006',1,63,'T','18:00:00','20:00:00'),(126,'2011006',1,63,'P','20:00:00','22:00:00'),(127,'2011105',1,64,'T','18:00:00','20:00:00'),(128,'2011105',1,64,'L','20:00:00','22:00:00'),(129,'2011105',1,65,'T','18:00:00','20:00:00'),(130,'2011105',1,65,'L','20:00:00','22:00:00');
/*!40000 ALTER TABLE `MAE_HORARIO_DETALLE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_MULTITAB_CAB`
--

DROP TABLE IF EXISTS `MAE_MULTITAB_CAB`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_MULTITAB_CAB` (
  `ID_MULTITAB_CAB` int NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID_MULTITAB_CAB`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_MULTITAB_CAB`
--

LOCK TABLES `MAE_MULTITAB_CAB` WRITE;
/*!40000 ALTER TABLE `MAE_MULTITAB_CAB` DISABLE KEYS */;
INSERT INTO `MAE_MULTITAB_CAB` (`ID_MULTITAB_CAB`, `DESCRIPCION`) VALUES (1,'TIPO ESPACIO ACADÉMICO'),(2,'TIPO DOCENTE'),(3,'ESCUELA ACADÉMICA'),(4,'TIPO CURSO'),(5,'TIPO DISPONIBILIDAD'),(6,'TIPO SOLICITANTE'),(7,'ESTADO SOLICITUD'),(8,'TIPO SOLICITUD'),(9,'BASE'),(10,'TURNO'),(11,'DÍA'),(12,'PABELLÓN'),(13,'ESTADO ASISTENCIA'),(14,'PRUEBA CABECERA TABLA EDITADO'),(15,'CATEGORÍA DE RECURSO');
/*!40000 ALTER TABLE `MAE_MULTITAB_CAB` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_MULTITAB_DET`
--

DROP TABLE IF EXISTS `MAE_MULTITAB_DET`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_MULTITAB_DET` (
  `ID_MULTITAB_DET` varchar(4) NOT NULL,
  `ID_MULTITAB_CAB` int NOT NULL,
  `DESCRIPCION_ITEM` varchar(50) DEFAULT NULL,
  `ABREVIATURA` varchar(10) DEFAULT NULL,
  PRIMARY KEY (`ID_MULTITAB_DET`,`ID_MULTITAB_CAB`),
  KEY `fk_MAE_MULTITAB_DET_MAE_MULTITAB_CAB1_idx` (`ID_MULTITAB_CAB`),
  CONSTRAINT `fk_MAE_MULTITAB_DET_MAE_MULTITAB_CAB1` FOREIGN KEY (`ID_MULTITAB_CAB`) REFERENCES `MAE_MULTITAB_CAB` (`ID_MULTITAB_CAB`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_MULTITAB_DET`
--

LOCK TABLES `MAE_MULTITAB_DET` WRITE;
/*!40000 ALTER TABLE `MAE_MULTITAB_DET` DISABLE KEYS */;
INSERT INTO `MAE_MULTITAB_DET` (`ID_MULTITAB_DET`, `ID_MULTITAB_CAB`, `DESCRIPCION_ITEM`, `ABREVIATURA`) VALUES ('0',13,'POR CONFIRMAR',NULL),('1',13,'ASISTIÓ',NULL),('1',14,'DETALLE 1 PRUEBA','DET1'),('2006',9,'BASE 6',''),('2007',9,'BASE 7',''),('2008',9,'BASE 8',''),('2009',9,'BASE 9',''),('2010',9,'BASE 10',''),('2011',9,'BASE 11',''),('2012',9,'BASE 12',''),('2013',9,'BASE 13',''),('2014',9,'BASE 14',''),('2015',9,'BASE 15',''),('2016',9,'BASE 16',''),('2017',9,'BASE 17',''),('2018',9,'BASE 18',''),('2019',9,'BASE 19',''),('A',1,'AULA','AUL'),('A',6,'ALUMNO','ALU'),('A',7,'EN REVISIÓN','REV'),('AL',4,'ALTERNATIVO','ALT'),('B',7,'APROBADO','APR'),('C',7,'RECHAZADO','REC'),('C',8,'COMPLEJA','COM'),('CON',15,'CONSULTAS','C'),('D',6,'DOCENTE','DOC'),('D',7,'REPROGRAMADO','REP'),('DO',11,'DOMINGO',''),('E',2,'EXTERNO','EXT'),('E',4,'ELECTIVO','EL'),('E',6,'EXTERNO','EXT'),('I',2,'INTERNO','INT'),('JU',11,'JUEVES',''),('L',1,'LABORATORIO','LAB'),('L',5,'LABORATORIO','LAB'),('LU',11,'LUNES',''),('M',10,'MAÑANA','MAN'),('MA',11,'MARTES',''),('MANT',15,'MANTENIMIENTOS','M'),('MI',11,'MIÉRCOLES',''),('N',10,'NOCHE','NOC'),('O',1,'OTROS','OTR'),('O',4,'OBLIGATORIO','OB'),('P',5,'PRÁCTICA','PR'),('PA',12,'PABELLÓN ANTIGUO','PA'),('PN',12,'PABELLÓN NUEVO','PN'),('PROC',15,'PROCESOS','P'),('REP',15,'REPORTES','R'),('S',3,'SISTEMAS','SS'),('S',8,'SIMPLE','SIM'),('SA',11,'SÁBADO',''),('T',5,'TEÓRICA','TE'),('T',10,'TARDE','TAR'),('VI',11,'VIERNES',''),('W',3,'SOTFWARE','SW');
/*!40000 ALTER TABLE `MAE_MULTITAB_DET` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_PARAMETROS_GENERALES`
--

DROP TABLE IF EXISTS `MAE_PARAMETROS_GENERALES`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_PARAMETROS_GENERALES` (
  `PERIODO` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_PARAMETROS_GENERALES`
--

LOCK TABLES `MAE_PARAMETROS_GENERALES` WRITE;
/*!40000 ALTER TABLE `MAE_PARAMETROS_GENERALES` DISABLE KEYS */;
INSERT INTO `MAE_PARAMETROS_GENERALES` (`PERIODO`) VALUES ('2020-1');
/*!40000 ALTER TABLE `MAE_PARAMETROS_GENERALES` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_PLAN`
--

DROP TABLE IF EXISTS `MAE_PLAN`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_PLAN` (
  `ID_PLAN` varchar(20) NOT NULL,
  `FACULTAD` varchar(4) DEFAULT NULL,
  `ESCUELA` varchar(4) DEFAULT NULL,
  `ESPECIALIDAD` varchar(4) DEFAULT NULL,
  `DESCRIPCION` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID_PLAN`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_PLAN`
--

LOCK TABLES `MAE_PLAN` WRITE;
/*!40000 ALTER TABLE `MAE_PLAN` DISABLE KEYS */;
INSERT INTO `MAE_PLAN` (`ID_PLAN`, `FACULTAD`, `ESCUELA`, `ESPECIALIDAD`, `DESCRIPCION`) VALUES ('2009','FISI','S','0','Plan de Estudios 2009'),('2012','FISI','S','0','Plan de Estudios 2012'),('2014','FISI','S','0','Plan de Estudios 2014'),('2015','FISI','W','0','Plan de Estudios 2015');
/*!40000 ALTER TABLE `MAE_PLAN` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_PRE_REQUISITO`
--

DROP TABLE IF EXISTS `MAE_PRE_REQUISITO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_PRE_REQUISITO` (
  `ID_PREREQ` int NOT NULL AUTO_INCREMENT,
  `ID_CURSO` varchar(20) NOT NULL,
  `ID_CURSO_PRE_REQUISITO` varchar(20) NOT NULL,
  `DESCRIPCION_PRE_REQUISITO` varchar(40) DEFAULT NULL,
  `GRUPO_PRE_REQUISITO` varchar(40) DEFAULT NULL,
  PRIMARY KEY (`ID_PREREQ`),
  KEY `fk_MAE_PRE_REQUISITO_MAE_CURSO1_idx` (`ID_CURSO`),
  KEY `fk_MAE_PRE_REQUISITO_MAE_CURSO2_idx` (`ID_CURSO_PRE_REQUISITO`),
  CONSTRAINT `fk_MAE_PRE_REQUISITO_MAE_CURSO1` FOREIGN KEY (`ID_CURSO`) REFERENCES `MAE_CURSO` (`ID_CURSO`),
  CONSTRAINT `fk_MAE_PRE_REQUISITO_MAE_CURSO2` FOREIGN KEY (`ID_CURSO_PRE_REQUISITO`) REFERENCES `MAE_CURSO` (`ID_CURSO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_PRE_REQUISITO`
--

LOCK TABLES `MAE_PRE_REQUISITO` WRITE;
/*!40000 ALTER TABLE `MAE_PRE_REQUISITO` DISABLE KEYS */;
/*!40000 ALTER TABLE `MAE_PRE_REQUISITO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_PROGRAMACION`
--

DROP TABLE IF EXISTS `MAE_PROGRAMACION`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_PROGRAMACION` (
  `SECCION` int NOT NULL,
  `ID_CURSO` varchar(20) NOT NULL,
  `ID_DOCENTE` varchar(20) NOT NULL,
  `PERIODO` varchar(20) DEFAULT NULL,
  `TOPE` int DEFAULT NULL,
  `MATRICULADOS` int DEFAULT NULL,
  `TURNO` varchar(4) DEFAULT NULL,
  `AULA` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`SECCION`,`ID_CURSO`),
  KEY `fk_MAE_PROGRAMACION_MAE_DOCENTE1_idx` (`ID_DOCENTE`),
  KEY `fk_MAE_PROGRAMACION_MAE_CURSO1_idx` (`ID_CURSO`),
  CONSTRAINT `fk_MAE_PROGRAMACION_MAE_CURSO1` FOREIGN KEY (`ID_CURSO`) REFERENCES `MAE_CURSO` (`ID_CURSO`),
  CONSTRAINT `fk_MAE_PROGRAMACION_MAE_DOCENTE1` FOREIGN KEY (`ID_DOCENTE`) REFERENCES `MAE_DOCENTE` (`ID_DOCENTE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_PROGRAMACION`
--

LOCK TABLES `MAE_PROGRAMACION` WRITE;
/*!40000 ALTER TABLE `MAE_PROGRAMACION` DISABLE KEYS */;
INSERT INTO `MAE_PROGRAMACION` (`SECCION`, `ID_CURSO`, `ID_DOCENTE`, `PERIODO`, `TOPE`, `MATRICULADOS`, `TURNO`, `AULA`) VALUES (1,'2010302','--',NULL,13,12,'M','--'),(1,'2010304','028428',NULL,5,2,'T','--'),(1,'2010401','0A1607',NULL,6,6,'M','--'),(1,'2010402','089575',NULL,35,12,'M','--'),(1,'2010404','0A0283',NULL,20,14,'M','--'),(1,'2010405','--',NULL,55,54,'--','--'),(1,'2010406','099589',NULL,35,8,'M','--'),(1,'2010502','098329',NULL,35,18,'M','--'),(1,'2010504','096385',NULL,25,25,'M','--'),(1,'2010505','095729',NULL,40,28,'M','--'),(1,'2010507','095702',NULL,10,2,'T','--'),(1,'2010601','0A0314',NULL,35,29,'T','--'),(1,'2010602','0A1610',NULL,35,23,'M','--'),(1,'2010604','09571E',NULL,35,14,'N','--'),(1,'2010605','--',NULL,35,23,'N','--'),(1,'2010606','099589',NULL,35,9,'N','--'),(1,'2010607','0A4149',NULL,40,39,'T','--'),(1,'2010701','--',NULL,35,6,'T','--'),(1,'2010703','--',NULL,40,4,'T','--'),(1,'2010705','0A1236',NULL,10,4,'N','--'),(1,'2010706','--',NULL,42,42,'N','--'),(1,'2010707','0A0040',NULL,35,21,'T','--'),(1,'2010806','091081',NULL,40,23,'T','--'),(1,'2010902','0A1419',NULL,45,45,'T','--'),(1,'2010904','053449',NULL,46,45,'T','--'),(1,'2011002','--',NULL,40,39,'T','--'),(1,'2011004','--',NULL,40,31,'T','--'),(1,'2011006','08954E',NULL,35,24,'N','--'),(1,'2011105','0A1608',NULL,40,30,'N','--'),(2,'2010302','010162',NULL,10,5,'U','--'),(2,'2010405','051934',NULL,30,21,'U','--'),(2,'2010606','0A4523',NULL,30,6,'N','--'),(2,'2010607','04055A',NULL,50,50,'T','--'),(2,'2010707','0A2078',NULL,33,33,'U','--');
/*!40000 ALTER TABLE `MAE_PROGRAMACION` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MAE_SOLICITANTE`
--

DROP TABLE IF EXISTS `MAE_SOLICITANTE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MAE_SOLICITANTE` (
  `ID_SOLICITANTE` int NOT NULL AUTO_INCREMENT,
  `DNI` varchar(8) DEFAULT NULL,
  `NOMBRES` varchar(40) DEFAULT NULL,
  `APELLIDO_PATERNO` varchar(40) DEFAULT NULL,
  `APELLIDO_MATERNO` varchar(40) DEFAULT NULL,
  `CELULAR` int DEFAULT NULL,
  `EMAIL` varchar(50) DEFAULT NULL,
  `TIPO_SOLICITANTE` varchar(4) DEFAULT NULL,
  `BASE` varchar(4) DEFAULT NULL,
  `ESCUELA` varchar(4) DEFAULT NULL,
  `ID_DOCENTE` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`ID_SOLICITANTE`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MAE_SOLICITANTE`
--

LOCK TABLES `MAE_SOLICITANTE` WRITE;
/*!40000 ALTER TABLE `MAE_SOLICITANTE` DISABLE KEYS */;
INSERT INTO `MAE_SOLICITANTE` (`ID_SOLICITANTE`, `DNI`, `NOMBRES`, `APELLIDO_PATERNO`, `APELLIDO_MATERNO`, `CELULAR`, `EMAIL`, `TIPO_SOLICITANTE`, `BASE`, `ESCUELA`, `ID_DOCENTE`) VALUES (1,'4673934','CARLOS','BRAVO','PEREZ',95573843,'carlos.bravo@unmsm.edu.pe','A','2016','W',NULL),(2,'4673935','MARCO','MARQUEZ','BRACHO',95573844,'marco.marquez@unmsm.edu.pe','A','2016','S',NULL),(3,'4673936','FIORELLA','ROJAS','FUENTES',95573845,'fiorella.rojas@unmsm.edu.pe','A','2016','S',NULL),(4,'4673937','OMAR','LOPEZ','MARIN',95573846,'omar.lopez@unmsm.edu.pe','A','2016','w',NULL),(5,'4673938','LINDA','PALMA','PEREZ',95573847,'linda.palma@unmsm.edu.pe','A','2016','w',NULL),(6,'4673939','VERONICA','LODGE','MORAN',95573848,'veronica.lodge@unmsm.edu.pe','A','2016','w',NULL),(7,'4673940','FILOMENA','FRANCO','LUNA',95573849,'filomena.franco@unmsm.edu.pe','A','2017','S',NULL),(9,'76602652','JACK EDITADO','ORE','PALOMINO',966199155,'jack.ore@unmsm.edu.pe','A','2016','S',NULL),(10,'46739342','X','X','X',966,'ahorasi.jpg@gmail.com','A','2016','S',NULL),(12,'12345678','CRISTHIAN','ALVAREZ','CAICEDO',921884220,'cristhian@unmsm.edu.pe','A','2016','S',NULL),(13,'8945637','L','L','L',987654321,'gfghgfhgfghfhGGG','E',NULL,NULL,NULL),(14,'02345678','RANDOMX','RANDOMX','RANDOMX',123456789,'hazlotuyo.jpg','E',NULL,NULL,NULL),(15,NULL,'--','-- --',NULL,NULL,NULL,'D',NULL,NULL,'--'),(16,NULL,'JAVIER ELMER','CABRERA DIAZ',NULL,NULL,NULL,'D',NULL,NULL,'010162'),(17,NULL,'VICTOR RAMON','GARCIA HERBOZO',NULL,NULL,NULL,'D',NULL,NULL,'028428'),(18,NULL,'JAVIER ARTURO','GAMBOA CRUZADO',NULL,NULL,NULL,'D',NULL,NULL,'0A1607'),(19,NULL,'GILBERTO ANIBAL','SALINAS AZAÑA',NULL,NULL,NULL,'D',NULL,NULL,'089575'),(20,NULL,'RUBEN ORLANDO','ARBAÑIL RIVADENEIRA',NULL,NULL,NULL,'D',NULL,NULL,'0A0283'),(21,NULL,'JAIME','PARIONA QUISPE',NULL,NULL,NULL,'D',NULL,NULL,'051934'),(22,NULL,'FELIX','FERMIN PEREZ',NULL,NULL,NULL,'D',NULL,NULL,'099589'),(23,NULL,'CESAR','LUZA MONTERO',NULL,NULL,NULL,'D',NULL,NULL,'098329'),(24,NULL,'SANTIAGO ESTEBAN','CONTRERAS ARANDA',NULL,NULL,NULL,'D',NULL,NULL,'096385'),(25,NULL,'JORGE LUIS','CHAVEZ SOTO',NULL,NULL,NULL,'D',NULL,NULL,'095729'),(26,NULL,'VICTOR','BUSTAMANTE OLIVERA',NULL,NULL,NULL,'D',NULL,NULL,'095702'),(27,NULL,'ARMANDO DAVID','ESPINOZA ROBLES',NULL,NULL,NULL,'D',NULL,NULL,'0A0314'),(28,NULL,'SANTIAGO DOMINGO','MOQUILLAZA HENRIQUEZ',NULL,NULL,NULL,'D',NULL,NULL,'0A1610'),(29,NULL,'JOHN LEDGARD','TRUJILLO TREJO',NULL,NULL,NULL,'D',NULL,NULL,'09571E'),(30,NULL,'SERGIO PAULO','VALCARCEL ASCENCIOS',NULL,NULL,NULL,'D',NULL,NULL,'0A4523'),(31,NULL,'MARÍA ELIZABETH','PUELLES BULNES',NULL,NULL,NULL,'D',NULL,NULL,'0A4149'),(32,NULL,'LUCIO','MALASQUEZ RUIZ',NULL,NULL,NULL,'D',NULL,NULL,'04055A'),(33,NULL,'CESAR ALBERTO','MOLINA NEYRA',NULL,NULL,NULL,'D',NULL,NULL,'0A1236'),(34,NULL,'GABRIEL','SOLARI CARBAJAL',NULL,NULL,NULL,'D',NULL,NULL,'0A0040'),(35,NULL,'CARLOS','ORTEGA MUÑOZ',NULL,NULL,NULL,'D',NULL,NULL,'0A2078'),(36,NULL,'LUIS','ALARCON LOAYZA',NULL,NULL,NULL,'D',NULL,NULL,'091081'),(37,NULL,'ADOLFO MARCOS','SOTELO BEDON',NULL,NULL,NULL,'D',NULL,NULL,'0A1419'),(38,NULL,'JOSE','PIEDRA ISUSQUI',NULL,NULL,NULL,'D',NULL,NULL,'053449'),(39,NULL,'NORBERTO ULISES','ROMAN CONCHA',NULL,NULL,NULL,'D',NULL,NULL,'08954E'),(40,NULL,'NORBERTO ANTONIO','OSORIO BELTRAN',NULL,NULL,NULL,'D',NULL,NULL,'0A1608');
/*!40000 ALTER TABLE `MAE_SOLICITANTE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MOV_ASIGNACION_RECURSO`
--

DROP TABLE IF EXISTS `MOV_ASIGNACION_RECURSO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MOV_ASIGNACION_RECURSO` (
  `ID_ASIGNACION` int NOT NULL AUTO_INCREMENT,
  `ID_ESPACIO_ACADEMICO` int DEFAULT NULL,
  `ID_CURSO` varchar(20) NOT NULL,
  `SECCION` int NOT NULL,
  `ID_HORARIO` int NOT NULL,
  `ID_HORARIO_DETALLE` int NOT NULL,
  `HORARIO_INICIO` varchar(8) DEFAULT NULL,
  `HORARIO_FIN` varchar(8) DEFAULT NULL,
  PRIMARY KEY (`ID_ASIGNACION`),
  KEY `fk_MAE_ASIGNACION_RECURSO_MAE_ESPACIO_ACADEMICO1_idx` (`ID_ESPACIO_ACADEMICO`),
  KEY `fk_MAE_ASIGNACION_RECURSO_MAE_HORARIO_DETALLE1_idx` (`ID_HORARIO_DETALLE`,`ID_CURSO`,`SECCION`,`ID_HORARIO`),
  CONSTRAINT `fk_MAE_ASIGNACION_RECURSO_MAE_ESPACIO_ACADEMICO1` FOREIGN KEY (`ID_ESPACIO_ACADEMICO`) REFERENCES `MAE_ESPACIO_ACADEMICO` (`ID_ESPACIO_ACADEMICO`),
  CONSTRAINT `fk_MAE_ASIGNACION_RECURSO_MAE_HORARIO_DETALLE1` FOREIGN KEY (`ID_HORARIO_DETALLE`, `ID_CURSO`, `SECCION`, `ID_HORARIO`) REFERENCES `MAE_HORARIO_DETALLE` (`ID_HORARIO_DETALLE`, `ID_CURSO`, `SECCION`, `ID_HORARIO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MOV_ASIGNACION_RECURSO`
--

LOCK TABLES `MOV_ASIGNACION_RECURSO` WRITE;
/*!40000 ALTER TABLE `MOV_ASIGNACION_RECURSO` DISABLE KEYS */;
/*!40000 ALTER TABLE `MOV_ASIGNACION_RECURSO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `MOV_SOLICITUD`
--

DROP TABLE IF EXISTS `MOV_SOLICITUD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `MOV_SOLICITUD` (
  `ID_SOLICITUD` int NOT NULL AUTO_INCREMENT,
  `ID_ESPACIO_ACADEMICO` int NOT NULL,
  `ID_SOLICITANTE` int NOT NULL,
  `ESTADO_SOLICITUD` varchar(4) DEFAULT NULL,
  `TIPO_SOLICITUD` varchar(4) DEFAULT NULL,
  `MOTIVO` varchar(200) DEFAULT NULL,
  `FECHA_REGISTRO` date DEFAULT NULL,
  `FECHA_RESERVA` date DEFAULT NULL,
  `HORA_INICIO` varchar(8) DEFAULT NULL,
  `HORA_FIN` varchar(8) DEFAULT NULL,
  `ESTADO_ASISTENCIA` varchar(4) DEFAULT NULL,
  `NOMBRE_ARCHIVO` varchar(200) DEFAULT NULL,
  `ARCHIVO` longblob,
  `USUARIO_ADICION` varchar(20) DEFAULT NULL,
  `FECHA_ADICION` date DEFAULT NULL,
  `USUARIO_MODIFICACION` varchar(20) DEFAULT NULL,
  `FECHA_MODIFICACION` date DEFAULT NULL,
  PRIMARY KEY (`ID_SOLICITUD`),
  KEY `fk_MOV_SOLICITUD_MAE_SOLICITANTE1_idx` (`ID_SOLICITANTE`),
  KEY `fk_MOV_SOLICITUD_MAE_ESPACIO_ACADEMICO1_idx` (`ID_ESPACIO_ACADEMICO`),
  CONSTRAINT `fk_MOV_SOLICITUD_MAE_ESPACIO_ACADEMICO1` FOREIGN KEY (`ID_ESPACIO_ACADEMICO`) REFERENCES `MAE_ESPACIO_ACADEMICO` (`ID_ESPACIO_ACADEMICO`),
  CONSTRAINT `fk_MOV_SOLICITUD_MAE_SOLICITANTE1` FOREIGN KEY (`ID_SOLICITANTE`) REFERENCES `MAE_SOLICITANTE` (`ID_SOLICITANTE`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `MOV_SOLICITUD`
--

LOCK TABLES `MOV_SOLICITUD` WRITE;
/*!40000 ALTER TABLE `MOV_SOLICITUD` DISABLE KEYS */;
INSERT INTO `MOV_SOLICITUD` (`ID_SOLICITUD`, `ID_ESPACIO_ACADEMICO`, `ID_SOLICITANTE`, `ESTADO_SOLICITUD`, `TIPO_SOLICITUD`, `MOTIVO`, `FECHA_REGISTRO`, `FECHA_RESERVA`, `HORA_INICIO`, `HORA_FIN`, `ESTADO_ASISTENCIA`, `NOMBRE_ARCHIVO`, `ARCHIVO`, `USUARIO_ADICION`, `FECHA_ADICION`, `USUARIO_MODIFICACION`, `FECHA_MODIFICACION`) VALUES (3,108,3,'C','S','SDADKSAJDSK',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL),(4,4,2,'A','S','dfgvhjn','2020-02-13','2020-02-12','20:00','22:00','0',NULL,NULL,NULL,NULL,NULL,NULL),(5,8,5,'A','S','juqasndujasd','2020-02-13','2020-02-13','12:00','14:00','0',NULL,NULL,NULL,NULL,NULL,NULL);
/*!40000 ALTER TABLE `MOV_SOLICITUD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SEG_PERFIL`
--

DROP TABLE IF EXISTS `SEG_PERFIL`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `SEG_PERFIL` (
  `ID_PERFIL` int NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID_PERFIL`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SEG_PERFIL`
--

LOCK TABLES `SEG_PERFIL` WRITE;
/*!40000 ALTER TABLE `SEG_PERFIL` DISABLE KEYS */;
INSERT INTO `SEG_PERFIL` (`ID_PERFIL`, `DESCRIPCION`) VALUES (1,'ADMINISTRADOR'),(4,'MANTENIMIENTOS PROFILE'),(5,'NUEVO PERFIL');
/*!40000 ALTER TABLE `SEG_PERFIL` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SEG_PERFIL_RECURSO`
--

DROP TABLE IF EXISTS `SEG_PERFIL_RECURSO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `SEG_PERFIL_RECURSO` (
  `ID_PERFIL_RECURSO` int NOT NULL AUTO_INCREMENT,
  `ID_RECURSO` varchar(20) NOT NULL,
  `ID_PERFIL` int NOT NULL,
  PRIMARY KEY (`ID_PERFIL_RECURSO`),
  KEY `fk_SEG_PERFIL_RECURSO_SEG_RECURSO1_idx` (`ID_RECURSO`),
  KEY `fk_SEG_PERFIL_RECURSO_SEG_PERFIL1_idx` (`ID_PERFIL`),
  CONSTRAINT `fk_SEG_PERFIL_RECURSO_SEG_PERFIL1` FOREIGN KEY (`ID_PERFIL`) REFERENCES `SEG_PERFIL` (`ID_PERFIL`),
  CONSTRAINT `fk_SEG_PERFIL_RECURSO_SEG_RECURSO1` FOREIGN KEY (`ID_RECURSO`) REFERENCES `SEG_RECURSO` (`ID_RECURSO`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SEG_PERFIL_RECURSO`
--

LOCK TABLES `SEG_PERFIL_RECURSO` WRITE;
/*!40000 ALTER TABLE `SEG_PERFIL_RECURSO` DISABLE KEYS */;
INSERT INTO `SEG_PERFIL_RECURSO` (`ID_PERFIL_RECURSO`, `ID_RECURSO`, `ID_PERFIL`) VALUES (1,'MANT_CURSO',1),(2,'MANT_SOLICITANTE',1),(3,'MANT_DOCENTE',1),(4,'MANT_USUARIO',1),(5,'MANT_REC',1),(6,'MANT_PERFIL',1),(7,'MANT_DETHORARIO',1),(8,'MANT_HORARIO',1),(9,'MANT_PLANACADEMICO',1),(10,'MANT_PROGACEDEMICA',1),(11,'MANT_PERMISOS',1),(12,'MANT_PERMISOS',1),(13,'CON_ESPACIO_DISP',1),(14,'EJEC_SOLIESPACIOS',1),(15,'EJEC_ASIGESPAC',1);
/*!40000 ALTER TABLE `SEG_PERFIL_RECURSO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SEG_PERFIL_USUARIO`
--

DROP TABLE IF EXISTS `SEG_PERFIL_USUARIO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `SEG_PERFIL_USUARIO` (
  `ID_USUARIO_PERFIL` int NOT NULL AUTO_INCREMENT,
  `USERNAME` varchar(20) NOT NULL,
  `ID_PERFIL` int NOT NULL,
  PRIMARY KEY (`ID_USUARIO_PERFIL`),
  KEY `fk_SEG_PERFIL_USUARIO_SEG_USUARIO1_idx` (`USERNAME`),
  KEY `fk_SEG_PERFIL_USUARIO_SEG_PERFIL1_idx` (`ID_PERFIL`),
  CONSTRAINT `fk_SEG_PERFIL_USUARIO_SEG_PERFIL1` FOREIGN KEY (`ID_PERFIL`) REFERENCES `SEG_PERFIL` (`ID_PERFIL`),
  CONSTRAINT `fk_SEG_PERFIL_USUARIO_SEG_USUARIO1` FOREIGN KEY (`USERNAME`) REFERENCES `SEG_USUARIO` (`USERNAME`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SEG_PERFIL_USUARIO`
--

LOCK TABLES `SEG_PERFIL_USUARIO` WRITE;
/*!40000 ALTER TABLE `SEG_PERFIL_USUARIO` DISABLE KEYS */;
INSERT INTO `SEG_PERFIL_USUARIO` (`ID_USUARIO_PERFIL`, `USERNAME`, `ID_PERFIL`) VALUES (1,'CALCA',1);
/*!40000 ALTER TABLE `SEG_PERFIL_USUARIO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SEG_RECURSO`
--

DROP TABLE IF EXISTS `SEG_RECURSO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `SEG_RECURSO` (
  `ID_RECURSO` varchar(50) NOT NULL,
  `ID_CATEGORIA_RECURSO` varchar(4) DEFAULT NULL,
  `DESCRIPCION` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID_RECURSO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SEG_RECURSO`
--

LOCK TABLES `SEG_RECURSO` WRITE;
/*!40000 ALTER TABLE `SEG_RECURSO` DISABLE KEYS */;
INSERT INTO `SEG_RECURSO` (`ID_RECURSO`, `ID_CATEGORIA_RECURSO`, `DESCRIPCION`) VALUES ('CON_ESPACIO_DISP','CON','CONSULTA ESPACIOS ACADEMICOS DISPONIBLES'),('EJEC_ASIGESPAC','PROC','EJECUCION DE ASIGNACION DE ESPACIOS'),('EJEC_SOLIESPACIOS','PROC','EJECUCION DE SOLICITUD DE ESPACIOS'),('MANT_CURSO','MANT','MANTENIMIENTO DE CURSO'),('MANT_DETHORARIO','MANT','MANTENIMIENTO DE DETALLE HORARIO'),('MANT_DOCENTE','MANT','MANTENIMIENTO DE DOCENTE'),('MANT_ESPACIO_ACADEMICO','MANT','MANTENIMIENTO DE ESPACIOS ACADEMICOS'),('MANT_HORARIO','MANT','MANTENIMIENTO DE HORARIO'),('MANT_MULTITABLAS','MANT','MANTENIMIENTO DE CABECERA DE MULTITABLAS'),('MANT_PERFIL','MANT','MANTENIMIENTO DE SEGURIDAD PERFILES'),('MANT_PERMISOS','MANT','MANTENIMIENTO DE SEGURIDAD DE PERMISOS'),('MANT_PLANACADEMICO','MANT','MANTENIMIENTO DE PLAN ACADEMICO'),('MANT_PROGACEDEMICA','MANT','MANTENIMINETO DE PROG ACADEMICA'),('MANT_REC','MANT','MANTENIMIENTO DE SEGURIDAD RECURSOS'),('MANT_SOLICITANTE','MANT','MANTENIMIENTO DE SOLICITANTE'),('MANT_USUARIO','MANT','MANTENIMIENTO DE SEGURIDAD USUARIOS'),('RPT_ESTADISTICAS','REPT','REPORTES ESTADISTICOS');
/*!40000 ALTER TABLE `SEG_RECURSO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `SEG_USUARIO`
--

DROP TABLE IF EXISTS `SEG_USUARIO`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
 SET character_set_client = utf8mb4 ;
CREATE TABLE `SEG_USUARIO` (
  `USERNAME` varchar(20) NOT NULL,
  `NOMBRES` varchar(40) DEFAULT NULL,
  `APELLIDOS` varchar(40) DEFAULT NULL,
  `PASSWORD` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`USERNAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `SEG_USUARIO`
--

LOCK TABLES `SEG_USUARIO` WRITE;
/*!40000 ALTER TABLE `SEG_USUARIO` DISABLE KEYS */;
INSERT INTO `SEG_USUARIO` (`USERNAME`, `NOMBRES`, `APELLIDOS`, `PASSWORD`) VALUES ('CALCA','KURIST','ALVAREZ','827ccb0eea8a706c4c34a16891f84e7b'),('JACK','JACK','ORE','827ccb0eea8a706c4c34a16891f84e7b'),('KAREN','KAREN','MUÑOZ ZAVALETA','202cb962ac59075b964b07152d234b70'),('MARIO','MARIO','CORTEZ','202cb962ac59075b964b07152d234b70');
/*!40000 ALTER TABLE `SEG_USUARIO` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Temporary view structure for view `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO`
--

DROP TABLE IF EXISTS `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO`;
/*!50001 DROP VIEW IF EXISTS `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO` AS SELECT 
 1 AS `ID`,
 1 AS `ID_ASIGNACION`,
 1 AS `ID_ESPACIO_ACADEMICO`,
 1 AS `CICLO`,
 1 AS `ID_CURSO`,
 1 AS `CURSO`,
 1 AS `SECCION`,
 1 AS `ID_DOCENTE`,
 1 AS `NOMBRES_DOCENTE`,
 1 AS `TOPE`,
 1 AS `MATRICULADOS`,
 1 AS `TURNO`,
 1 AS `DESCRIPCION_TURNO`,
 1 AS `TIPO_HORARIO`,
 1 AS `DESCRIPCION_TIPO_HORARIO`,
 1 AS `DIA`,
 1 AS `DESCRIPCION_DIA`,
 1 AS `ID_HORARIO`,
 1 AS `ID_HORARIO_DETALLE`,
 1 AS `HORARIO_INICIO`,
 1 AS `HORARIO_FIN`,
 1 AS `ESPACIO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS`
--

DROP TABLE IF EXISTS `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS`;
/*!50001 DROP VIEW IF EXISTS `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS` AS SELECT 
 1 AS `ID`,
 1 AS `ID_ASIGNACION`,
 1 AS `HORARIO`,
 1 AS `ID_ESPACIO_ACADEMICO`,
 1 AS `DESCRIPCION_ESPACIO_ACADEMICO`,
 1 AS `ID_CURSO`,
 1 AS `DESCRIPCION_CURSO`,
 1 AS `TIPO`,
 1 AS `DIA`,
 1 AS `TIPO_HORARIO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MANT_MAE_PARAMETROS_GENERALES`
--

DROP TABLE IF EXISTS `VIE_MANT_MAE_PARAMETROS_GENERALES`;
/*!50001 DROP VIEW IF EXISTS `VIE_MANT_MAE_PARAMETROS_GENERALES`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MANT_MAE_PARAMETROS_GENERALES` AS SELECT 
 1 AS `PERIODO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_CURSO`
--

DROP TABLE IF EXISTS `VIE_MAN_CURSO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_CURSO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_CURSO` AS SELECT 
 1 AS `ID_PLAN`,
 1 AS `ID_CURSO`,
 1 AS `CICLO`,
 1 AS `ESPECIALIDAD`,
 1 AS `DESCRIPCION`,
 1 AS `CREDITAJE`,
 1 AS `TIPO`,
 1 AS `GRUPO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_DOCENTE`
--

DROP TABLE IF EXISTS `VIE_MAN_DOCENTE`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_DOCENTE`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_DOCENTE` AS SELECT 
 1 AS `ID_DOCENTE`,
 1 AS `NOMBRES`,
 1 AS `APELLIDOS`,
 1 AS `TIPO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_ESPACIO_ACADEMICO`
--

DROP TABLE IF EXISTS `VIE_MAN_ESPACIO_ACADEMICO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_ESPACIO_ACADEMICO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_ESPACIO_ACADEMICO` AS SELECT 
 1 AS `ID_ESPACIO_ACADEMICO`,
 1 AS `DESCRIPCION_ESPACIO_ACADEMICO`,
 1 AS `AFORO`,
 1 AS `PABELLON`,
 1 AS `DESCRIPCION_PABELLON`,
 1 AS `TIPO_ESPACIO`,
 1 AS `DESCRIPCION_TIPO_ESPACIO`,
 1 AS `ASIGNABLE`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_HORARIO`
--

DROP TABLE IF EXISTS `VIE_MAN_HORARIO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_HORARIO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_HORARIO` AS SELECT 
 1 AS `ID_HORARIO`,
 1 AS `ID_CURSO`,
 1 AS `DESC_CURSO`,
 1 AS `SECCION`,
 1 AS `DIA`,
 1 AS `HORARIO_INICIO`,
 1 AS `HORARIO_FIN`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_HORARIO_DETALLE`
--

DROP TABLE IF EXISTS `VIE_MAN_HORARIO_DETALLE`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_HORARIO_DETALLE`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_HORARIO_DETALLE` AS SELECT 
 1 AS `ID_HORARIO_DETALLE`,
 1 AS `ID_CURSO`,
 1 AS `DESC_CURSO`,
 1 AS `SECCION`,
 1 AS `ID_HORARIO`,
 1 AS `DESCRIPCION_HORARIO`,
 1 AS `TIPO_HORARIO`,
 1 AS `DESCRIPCION_TIPO_HORARIO`,
 1 AS `HORARIO_INICIO`,
 1 AS `HORARIO_FIN`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_MULTITAB_CAB`
--

DROP TABLE IF EXISTS `VIE_MAN_MULTITAB_CAB`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_MULTITAB_CAB`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_MULTITAB_CAB` AS SELECT 
 1 AS `ID_MULTITAB_CAB`,
 1 AS `DESCRIPCION_MULTITAB_CAB`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_MULTITAB_DET`
--

DROP TABLE IF EXISTS `VIE_MAN_MULTITAB_DET`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_MULTITAB_DET`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_MULTITAB_DET` AS SELECT 
 1 AS `ID_MULTITAB_CAB`,
 1 AS `DESCRIPCION_MULTITAB_CAB`,
 1 AS `ID_MULTITAB_DET`,
 1 AS `DESCRIPCION_ITEM`,
 1 AS `ABREVIATURA`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_PLAN_ACADEMICO`
--

DROP TABLE IF EXISTS `VIE_MAN_PLAN_ACADEMICO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_PLAN_ACADEMICO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_PLAN_ACADEMICO` AS SELECT 
 1 AS `ID_PLAN`,
 1 AS `DESCRIPCION_PLAN`,
 1 AS `FACULTAD`,
 1 AS `ESCUELA`,
 1 AS `DESCRIPCION_ESCUELA`,
 1 AS `ESPECIALIDAD`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_PROGRAMACION_ACADEMICA`
--

DROP TABLE IF EXISTS `VIE_MAN_PROGRAMACION_ACADEMICA`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_PROGRAMACION_ACADEMICA`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_PROGRAMACION_ACADEMICA` AS SELECT 
 1 AS `ID_CURSO`,
 1 AS `DESCRIPCION_CURSO`,
 1 AS `SECCION`,
 1 AS `ID_DOCENTE`,
 1 AS `NOMBRES_DOCENTE`,
 1 AS `TOPE`,
 1 AS `MATRICULADOS`,
 1 AS `TURNO`,
 1 AS `DESCRIPCION_TURNO`,
 1 AS `AULA`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SEG_PERFIL`
--

DROP TABLE IF EXISTS `VIE_MAN_SEG_PERFIL`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SEG_PERFIL` AS SELECT 
 1 AS `ID_PERFIL`,
 1 AS `DESCRIPCION_PERFIL`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SEG_PERFIL_RECURSO`
--

DROP TABLE IF EXISTS `VIE_MAN_SEG_PERFIL_RECURSO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL_RECURSO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SEG_PERFIL_RECURSO` AS SELECT 
 1 AS `ID_PERFIL_RECURSO`,
 1 AS `ID_RECURSO`,
 1 AS `ID_CATEGORIA_RECURSO`,
 1 AS `DESCRIPCION_CATEGORIA_RECURSO`,
 1 AS `DESCRIPCION_RECURSO`,
 1 AS `ID_PERFIL`,
 1 AS `DESCRIPCION_PERFIL`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SEG_PERFIL_USUARIO`
--

DROP TABLE IF EXISTS `VIE_MAN_SEG_PERFIL_USUARIO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL_USUARIO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SEG_PERFIL_USUARIO` AS SELECT 
 1 AS `ID_PERFIL_USUARIO`,
 1 AS `USUARIO`,
 1 AS `NOMBRES`,
 1 AS `APELLIDOS`,
 1 AS `ID_PERFIL`,
 1 AS `DESCRIPCION_PERFIL`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SEG_RECURSO`
--

DROP TABLE IF EXISTS `VIE_MAN_SEG_RECURSO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_RECURSO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SEG_RECURSO` AS SELECT 
 1 AS `ID_RECURSO`,
 1 AS `ID_CATEGORIA_RECURSO`,
 1 AS `DESCRIPCION_CATEGORIA_RECURSO`,
 1 AS `DESCRIPCION_RECURSO`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SEG_USUARIO`
--

DROP TABLE IF EXISTS `VIE_MAN_SEG_USUARIO`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_USUARIO`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SEG_USUARIO` AS SELECT 
 1 AS `USUARIO`,
 1 AS `CONTRASENIA`,
 1 AS `NOMBRES`,
 1 AS `APELLIDOS`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_MAN_SOLICITANTE`
--

DROP TABLE IF EXISTS `VIE_MAN_SOLICITANTE`;
/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SOLICITANTE`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_MAN_SOLICITANTE` AS SELECT 
 1 AS `ID_SOLICITANTE`,
 1 AS `DNI`,
 1 AS `NOMBRES`,
 1 AS `APELLIDO_PATERNO`,
 1 AS `APELLIDO_MATERNO`,
 1 AS `CELULAR`,
 1 AS `EMAIL`,
 1 AS `TIPO_SOLICITANTE`,
 1 AS `DESCRIPCION_TIPO_SOLICITANTE`,
 1 AS `BASE`,
 1 AS `DESCRIPCION_BASE`,
 1 AS `ESCUELA`,
 1 AS `DESCRIPCION_ESCUELA`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_REP_SOLICITUDES`
--

DROP TABLE IF EXISTS `VIE_REP_SOLICITUDES`;
/*!50001 DROP VIEW IF EXISTS `VIE_REP_SOLICITUDES`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_REP_SOLICITUDES` AS SELECT 
 1 AS `ID`,
 1 AS `ID_SOLICITANTE`,
 1 AS `DNI`,
 1 AS `NOMBRE_COMPLETO`,
 1 AS `ID_ESPACIO_ACADEMICO`,
 1 AS `DESCRIPCION_ESPACIO_ACADEMICO`,
 1 AS `ID_PABELLON`,
 1 AS `DESCRIPCION_PABELLON`,
 1 AS `TIPO_ESPACIO`,
 1 AS `DESCRIPCION_TIPO_ESPACIO`,
 1 AS `ESTADO_SOLICITUD`,
 1 AS `DESCRIPCION_ESTADO_SOLICITUD`,
 1 AS `TIPO_SOLICITUD`,
 1 AS `DESCRIPCION_TIPO_SOLICITUD`,
 1 AS `MOTIVO`,
 1 AS `FECHA_REGISTRO`,
 1 AS `FECHA_RESERVA`,
 1 AS `HORA_INICIO`,
 1 AS `HORA_FIN`,
 1 AS `ESTADO_ASISTENCIA`,
 1 AS `DESCRIPCION_ESTADO_ASISTENCIA`,
 1 AS `CANTIDAD`*/;
SET character_set_client = @saved_cs_client;

--
-- Temporary view structure for view `VIE_SOLICITUD`
--

DROP TABLE IF EXISTS `VIE_SOLICITUD`;
/*!50001 DROP VIEW IF EXISTS `VIE_SOLICITUD`*/;
SET @saved_cs_client     = @@character_set_client;
SET character_set_client = utf8mb4;
/*!50001 CREATE VIEW `VIE_SOLICITUD` AS SELECT 
 1 AS `ID_SOLICITUD`,
 1 AS `ID_ESPACIO_ACADEMICO`,
 1 AS `DESCRIPCION_ESPACIO_ACADEMICO`,
 1 AS `ID_SOLICITANTE`,
 1 AS `DNI`,
 1 AS `NOMBRES`,
 1 AS `APELLIDO_PATERNO`,
 1 AS `APELLIDO_MATERNO`,
 1 AS `ESTADO_SOLICITUD`,
 1 AS `DESCRIPCION_ESTADO_SOLICITUD`,
 1 AS `TIPO_SOLICITUD`,
 1 AS `DESCRIPCION_TIPO_SOLICITUD`,
 1 AS `MOTIVO`,
 1 AS `FECHA_REGISTRO`,
 1 AS `FECHA_RESERVA`,
 1 AS `HORA_INICIO`,
 1 AS `HORA_FIN`,
 1 AS `ESTADO_ASISTENCIA`,
 1 AS `NOMBRE_ARCHIVO`,
 1 AS `ARCHIVO`*/;
SET character_set_client = @saved_cs_client;

--
-- Dumping events for database 'sisgea'
--

--
-- Dumping routines for database 'sisgea'
--
/*!50003 DROP FUNCTION IF EXISTS `FUN_ESPACIO_ES_DISPONIBLE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `FUN_ESPACIO_ES_DISPONIBLE`(
	PI_ID_ESPACIO	INT,
    PI_DIA 			VARCHAR(4),
	PI_HORARIO_INI	VARCHAR(8),
    PI_HORARIO_FIN	VARCHAR(8)
) RETURNS int
BEGIN
DECLARE l_disponible	INT;
SELECT COUNT(*)
INTO l_disponible
FROM MOV_ASIGNACION_RECURSO A
INNER JOIN MAE_HORARIO B ON A.ID_HORARIO= B.ID_HORARIO
WHERE(
-- CRUCE EN LAS ULTIMAS HORAS
(CAST(A.HORARIO_INICIO AS DECIMAL(5,0))< CAST(PI_HORARIO_FIN AS DECIMAL(5,0)) 
  AND CAST(A.HORARIO_INICIO	 AS DECIMAL(5,0)) > CAST(PI_HORARIO_INI AS DECIMAL(5,0))) OR
-- CRUCE EN LAS PRIMERAS HORAS
(CAST(A.HORARIO_FIN	 AS DECIMAL(5,0)) > CAST(PI_HORARIO_INI AS DECIMAL(5,0))
 AND CAST(A.HORARIO_FIN	 AS DECIMAL(5,0)) < CAST(PI_HORARIO_FIN AS DECIMAL(5,0)) )  OR
-- HORARIO DENTRO DE EXISTENTE
(CAST(A.HORARIO_INICIO	 AS DECIMAL(5,0)) <= CAST(PI_HORARIO_INI AS DECIMAL(5,0))
 AND CAST(A.HORARIO_FIN	 AS DECIMAL(5,0)) >= CAST(PI_HORARIO_FIN AS DECIMAL(5,0))  )  )
  AND B.DIA					 =PI_DIA
  AND A.ID_ESPACIO_ACADEMICO = PI_ID_ESPACIO;
  
RETURN l_disponible;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `rownum` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` FUNCTION `rownum`() RETURNS int
    DETERMINISTIC
BEGIN
  set @prvrownum=if(@ranklastrun=CURTIME(6),@prvrownum+1,1);
  set @ranklastrun=CURTIME(6);
  RETURN @prvrownum;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_APROBACION_SOLICITUD` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_APROBACION_SOLICITUD`(
	IN PI_MODO					VARCHAR(20) ,
	INOUT PIO_ID_SOLICITUD		INT
)
BEGIN
	
    CASE PI_MODO
		WHEN 'APROBAR' THEN
			UPDATE MOV_SOLICITUD
				SET ESTADO_SOLICITUD = 'B'
			WHERE ID_SOLICITUD = PIO_ID_SOLICITUD;
		WHEN 'RECHAZAR' THEN
			UPDATE MOV_SOLICITUD
				SET ESTADO_SOLICITUD = 'C'
			WHERE ID_SOLICITUD = PIO_ID_SOLICITUD;
	END CASE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_ASIGNACION_ESPACIO_ACADEMICO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `PRC_ASIGNACION_ESPACIO_ACADEMICO`()
BEGIN
-- VARIABLES DEL CURSOR ESPACIO ACADÉMICO
	DECLARE l_id_espacio_academico	INT;
	DECLARE l_aforo					INT;
    DECLARE l_tipo_espacio 			VARCHAR(4);
    DECLARE l_asignable				INT;
-- VARIABLES DEL CURSOR DETALLES-HORARIO
    DECLARE l_seccion				INT;
	DECLARE l_id_curso				VARCHAR(20);
    DECLARE l_matriculados			INT;
	DECLARE l_tipo_horario			VARCHAR(4);
    DECLARE l_dia					VARCHAR(4);
	DECLARE l_horario_inicio		VARCHAR(8);
    DECLARE l_horario_fin			VARCHAR(8);
-- COMPLEMENTARIOS 
    DECLARE l_id_horario			INT;
    DECLARE l_id_horario_detalle	INT;
    DECLARE l_aula_valida     		INT;
    DECLARE finished INT UNSIGNED DEFAULT 0;
    
-- DECLARACION DE CURSORES
    DECLARE cur_det_horario CURSOR FOR 
    SELECT  A.SECCION
	 ,  A.ID_CURSO	
     ,  B.MATRICULADOS 
     ,  A.TIPO_HORARIO 
     ,  C.DIA 
     ,  A.HORARIO_INICIO 
     ,  A.HORARIO_FIN 
     ,  C.ID_HORARIO 
     ,  A.ID_HORARIO_DETALLE
	FROM MAE_HORARIO_DETALLE A
	INNER JOIN MAE_PROGRAMACION B ON A.ID_CURSO=B.ID_CURSO AND A.SECCION=B.SECCION
	INNER JOIN MAE_HORARIO C ON C.ID_HORARIO=A.ID_HORARIO
	ORDER BY B.MATRICULADOS DESC;
	DECLARE CONTINUE HANDLER FOR NOT FOUND SET finished = 1;
    
-- INICIO RECORRIDO DE CURSOR: cur_det_horario
	OPEN cur_det_horario;
	cur_det_horario:REPEAT
			FETCH cur_det_horario INTO l_seccion,l_id_curso,l_matriculados,l_tipo_horario,l_dia,l_horario_inicio,l_horario_fin,l_id_horario,l_id_horario_detalle;
	IF NOT finished THEN
-- INICIO RECORRIDO DE CURSOR: cur_espacios
		BLOCK2: BEGIN
			DECLARE finished_2 INT UNSIGNED DEFAULT 0;
			DECLARE cur_espacios CURSOR FOR 
			SELECT ID_ESPACIO_ACADEMICO
				,  AFORO
				,  TIPO_ESPACIO
				,  ASIGNABLE
			FROM MAE_ESPACIO_ACADEMICO;
            DECLARE CONTINUE HANDLER FOR NOT FOUND SET finished_2 = 1;
            OPEN cur_espacios;
            cur_espacios:LOOP
				FETCH cur_espacios INTO l_id_espacio_academico,l_aforo,l_tipo_espacio,l_asignable;
			IF finished_2=1 THEN
            -- EN CASO NINGUN ESPACIO PUEDA SER ASIGNADO SE INSERTA CON NULL EN ESE CAMPO
            INSERT INTO MOV_ASIGNACION_RECURSO(   ID_CURSO
                                                 , SECCION
                                                 , ID_HORARIO
                                                 , ID_HORARIO_DETALLE
												 , HORARIO_INICIO
                                                 , HORARIO_FIN )
										   VALUES( l_id_curso
                                                 , l_seccion
												 , l_id_horario
                                                 , l_id_horario_detalle
                                                 , l_horario_inicio
                                                 , l_horario_fin);
				COMMIT;
                CLOSE cur_espacios;
                LEAVE cur_espacios;
			END IF;
            SET l_aula_valida =CASE WHEN l_tipo_horario ='T'AND l_tipo_espacio='A' THEN 1
				 WHEN l_tipo_horario ='T'AND l_tipo_espacio='L' THEN 0
                 WHEN l_tipo_horario ='L'AND l_tipo_espacio='A' THEN 0
				 WHEN l_tipo_horario ='L'AND l_tipo_espacio='L' THEN 1
				END;
            -- VALIDAMOS SI EL ESPACIO TIENE DISPONIBILIDAD PARA SER ASIGNADO AL REGISTRO
            IF FUN_ESPACIO_ES_DISPONIBLE(l_id_espacio_academico,l_dia,l_horario_inicio,l_horario_fin) =0 AND l_aula_valida=1 AND l_matriculados<=l_aforo  THEN
				INSERT INTO MOV_ASIGNACION_RECURSO(ID_ESPACIO_ACADEMICO
												 , ID_CURSO
                                                 , SECCION
                                                 , ID_HORARIO
                                                 , ID_HORARIO_DETALLE
												 , HORARIO_INICIO
                                                 , HORARIO_FIN )
										   VALUES( l_id_espacio_academico
												 , l_id_curso
                                                 , l_seccion
												 , l_id_horario
                                                 , l_id_horario_detalle
                                                 , l_horario_inicio
                                                 , l_horario_fin);
				COMMIT;
                CLOSE cur_espacios;
                LEAVE cur_espacios;
            END IF;
			END LOOP cur_espacios;
        END BLOCK2;
-- FIN RECORRIDO DE CURSOR: cur_espacios
    END IF;
    COMMIT;
    UNTIL finished
    END REPEAT cur_det_horario;
    CLOSE cur_det_horario;
-- FIN RECORRIDO DE CURSOR: cur_det_horario
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_ASIGNACION_ESPACIO_SOLICITANTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_ASIGNACION_ESPACIO_SOLICITANTE`(
	  IN		PI_MODO						      VARCHAR(20),		
	  INOUT PIO_ID_SOLICITUD			  INT,
	  IN		PI_ID_ESPACIO_ACADEMICO INT,
    IN 		PI_ID_SOLICITANTE			  INT,
    IN		PI_ESTADO_SOLICITUD			VARCHAR(4),
    IN		PI_TIPO_SOLICITUD			  VARCHAR(4),
    IN		PI_MOTIVO					      VARCHAR(200),
    IN		PI_FECHA_REGISTRO			  DATE,
    IN		PI_FECHA_RESERVA			  DATE,
    IN		PI_HORA_INICIO				  VARCHAR(8),
    IN		PI_HORA_FIN					    VARCHAR(8),
    IN		PI_ESTADO_ASISTENCIA		VARCHAR(4),
    IN    PI_NOMBRE_ARCHIVO       VARCHAR(100),
    IN    PI_ARCHIVO              LONGBLOB
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asignación ', PIO_ID_SOLICITUD);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MOV_SOLICITUD (
            			ID_ESPACIO_ACADEMICO,
            			ID_SOLICITANTE,
            			ESTADO_SOLICITUD,
            			TIPO_SOLICITUD,
            			MOTIVO,
            			FECHA_REGISTRO,
            			FECHA_RESERVA,
            			HORA_INICIO,
            			HORA_FIN,
            			ESTADO_ASISTENCIA,
                  NOMBRE_ARCHIVO,
                  ARCHIVO)
      		VALUES(
            			PI_ID_ESPACIO_ACADEMICO,
                  PI_ID_SOLICITANTE,
                  PI_ESTADO_SOLICITUD,
                  PI_TIPO_SOLICITUD,
                  PI_MOTIVO,
                  CURDATE(),
                  PI_FECHA_RESERVA,
                  PI_HORA_INICIO,
                  PI_HORA_FIN,
                  '0',
                  PI_NOMBRE_ARCHIVO,
                  PI_ARCHIVO);
      SELECT LAST_INSERT_ID() INTO PIO_ID_SOLICITUD;
    WHEN 'UPDATE' THEN
      UPDATE MOV_SOLICITUD
    		SET
          ID_ESPACIO_ACADEMICO  = PI_ID_ESPACIO_ACADEMICO,
    		  ID_SOLICITANTE			  = PI_ID_SOLICITANTE,
          ESTADO_SOLICITUD		  = PI_ESTADO_SOLICITUD,
    		  TIPO_SOLICITUD			  = PI_TIPO_SOLICITUD,
          MOTIVO					      = PI_MOTIVO,
          FECHA_REGISTRO			  = PI_FECHA_REGISTRO,
          FECHA_RESERVA			    = PI_FECHA_RESERVA,
          HORA_INICIO				    = PI_HORA_INICIO,
          HORA_FIN				      = PI_HORA_FIN,
          ESTADO_SISTENCOA		  = PI_ESTADO_ASISTENCIA,
          NOMBRE_ARCHIVO        = PI_NOMBRE_ARCHIVO,
          ARCHIVO               = PI_ARCHIVO
    		WHERE ID_SOLICITUD	    = PIO_ID_SOLICITUD;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MOV_SOLICITUD
		        WHERE ID_SOLICITUD = PIO_ID_SOLICITUD;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_ASIGNACION_ESPACIO_SOLICITANTE');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_ASIGNACION_MANUAL_ESPACIO_ACADEMICO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_ASIGNACION_MANUAL_ESPACIO_ACADEMICO`(
  IN  PI_MODO						      VARCHAR(20),		
  IN  PI_ID_ASIGNACION		    INT,
  IN  PI_ID_ESPACIO_ACADEMICO INT,
  IN  PI_ID_CURSO             VARCHAR(20),
  IN  PI_SECCION              INT,
  IN  PI_ID_HORARIO           INT,
  IN  PI_ID_HORARIO_DETALLE   INT,
  IN  PI_HORARIO_INICIO			  VARCHAR(8),
  IN  PI_HORARIO_FIN				  VARCHAR(8)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asignación ', PI_ID_ASIGNACION);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'UPDATE' THEN
      UPDATE MOV_ASIGNACION_RECURSO
    		SET
          ID_ESPACIO_ACADEMICO  = PI_ID_ESPACIO_ACADEMICO,
          ID_CURSO              = PI_ID_CURSO,
          SECCION               = PI_SECCION,
          ID_HORARIO            = PI_ID_HORARIO,
          ID_HORARIO_DETALLE    = PI_ID_HORARIO_DETALLE,
          HORARIO_INICIO        = PI_HORARIO_INICIO,
          HORARIO_FIN           = PI_HORARIO_FIN
    		WHERE ID_ASIGNACION = PI_ID_ASIGNACION;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MOV_ASIGNACION_RECURSO
		        WHERE ID_ASIGNACION = PI_ID_ASIGNACION;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_ASIGNACION_MANUAL_ESPACIO_ACADEMICO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_EXC_CASE_NO_ENCONTRADO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_EXC_CASE_NO_ENCONTRADO`(
  IN  PI_MODO_NO_ENCONTRADO   varchar(255),
  IN  PI_NOMBRE_PROCEDIMIENTO varchar(100)
)
BEGIN
  DECLARE L_MENSAJE_EXCEPCION varchar(500);
  SET L_MENSAJE_EXCEPCION = CONCAT('El modo ', PI_MODO_NO_ENCONTRADO, ' definido en el procedimiento ', PI_NOMBRE_PROCEDIMIENTO, ' es incorrecto');

  SIGNAL SQLSTATE '23000'
  SET MESSAGE_TEXT = L_MENSAJE_EXCEPCION, MYSQL_ERRNO = 20006;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_EXC_CLASE_DUPLICADA` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_EXC_CLASE_DUPLICADA`(
  IN  PI_MENSAJE_EXCEPCION  varchar(500)
)
BEGIN
  SIGNAL SQLSTATE '23000'
  SET MESSAGE_TEXT = PI_MENSAJE_EXCEPCION, MYSQL_ERRNO = 20002;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_EXC_OPERACION_NO_REALIZADA` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_EXC_OPERACION_NO_REALIZADA`(
  IN  PI_ROW_COUNT          int,
  IN  PI_MENSAJE_EXCEPCION  varchar(500)
)
BEGIN
  IF(PI_ROW_COUNT IS NULL OR PI_ROW_COUNT <= 0) THEN
    SIGNAL SQLSTATE '23000'
    SET MESSAGE_TEXT = PI_MENSAJE_EXCEPCION, MYSQL_ERRNO = 20005;
  END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_EXC_REGISTRO_HIJO_ENCONTRADO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_EXC_REGISTRO_HIJO_ENCONTRADO`(
  IN  PI_MENSAJE_EXCEPCION  varchar(500)
)
BEGIN
  SIGNAL SQLSTATE '23000'
  SET MESSAGE_TEXT = PI_MENSAJE_EXCEPCION, MYSQL_ERRNO = 20004;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO`(
  IN  PI_MENSAJE_EXCEPCION  varchar(500)
)
BEGIN
  SIGNAL SQLSTATE '23000'
  SET MESSAGE_TEXT = PI_MENSAJE_EXCEPCION, MYSQL_ERRNO = 20007;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_CURSO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_CURSO`(
	IN  PI_MODO			      VARCHAR(20),
	IN	PI_ID_PLAN        VARCHAR(20),
  IN	PI_ID_CURSO	      VARCHAR(40),
	IN  PI_CICLO	        INT,
  IN  PI_ESPECIALIDAD   VARCHAR(4),
  IN  PI_DESCRIPCION    varchar(100),
  IN  PI_CREDITAJE      decimal(5,2),
  IN  PI_TIPO           varchar(4),
  IN  PI_GRUPO          varchar(10)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El curso ', PI_ID_CURSO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_CURSO(
                  ID_PLAN,
                  ID_CURSO,
                  CICLO,
                  ESPECIALIDAD,
                  DESCRIPCION,
                  CREDITAJE,
                  TIPO,
                  GRUPO)
      		VALUES(
                  PI_ID_PLAN,
                  PI_ID_CURSO,
                  PI_CICLO,
                  PI_ESPECIALIDAD,
                  PI_DESCRIPCION,
                  PI_CREDITAJE,
                  PI_TIPO,
                  PI_GRUPO);
    WHEN 'UPDATE' THEN
      UPDATE MAE_CURSO
      	SET
      			ID_PLAN       = PI_NOMBRES,
            CICLO         = PI_CICLO,
            ESPECIALIDAD  = PI_ESPECIALIDAD,
            DESCRIPCION   = PI_DESCRIPCION,
            CREDITAJE     = PI_CREDITAJE,
            TIPO          = PI_TIPO,
            GRUPO         = PI_GRUPO
		    WHERE ID_DOCENTE  = PI_ID_CURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_CURSO
		        WHERE ID_CURSO	= PI_ID_CURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_CURSO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_DOCENTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_DOCENTE`(
	IN  PI_MODO			  VARCHAR(20),
	IN	PI_ID_DOCENTE VARCHAR(20),
  IN	PI_NOMBRES	  VARCHAR(40),
	IN  PI_APELLIDOS	VARCHAR(40),
  IN  PI_TIPO			  VARCHAR(4)
)
BEGIN
  DECLARE L_EXISTE_DOCENTE_SOLICITANTE TINYINT;
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El docente ', PI_ID_DOCENTE);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_DOCENTE(
                  ID_DOCENTE,
                  NOMBRES,
                  APELLIDOS,
                  TIPO)
      		VALUES(
                  PI_ID_DOCENTE,
                  PI_NOMBRES,
                  PI_APELLIDOS,
                  PI_TIPO);
      SELECT COUNT(*) INTO L_EXISTE_DOCENTE_SOLICITANTE
        FROM MAE_SOLICITANTE
        WHERE ID_DOCENTE = PI_ID_DOCENTE;
      IF (L_EXISTE_DOCENTE_SOLICITANTE >= 1) THEN
        UPDATE MAE_SOLICITANTE
          SET 
              NOMBRES           = PI_NOMBRES,
              APELLIDO_PATERNO  = PI_APELLIDOS,
              TIPO_SOLICITANTE  = 'D'
          WHERE ID_DOCENTE = PI_ID_DOCENTE;
      ELSE
        INSERT INTO MAE_SOLICITANTE (
                    NOMBRES,
                    APELLIDO_PATERNO,
                    TIPO_SOLICITANTE,
                    ID_DOCENTE)
            VALUES (
                    PI_NOMBRES,
                    PI_APELLIDOS,
                    'D',
                    PI_ID_DOCENTE);
      END IF;
    WHEN 'UPDATE' THEN
      UPDATE MAE_DOCENTE
      	SET
      			NOMBRES   = PI_NOMBRES,
            APELLIDOS = PI_APELLIDOS,
            TIPO      = PI_TIPO
		    WHERE ID_DOCENTE  = PI_ID_DOCENTE;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_DOCENTE
		        WHERE ID_DOCENTE	= PI_ID_DOCENTE;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_DOCENTE');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_ESPACIO_ACADEMICO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_ESPACIO_ACADEMICO`(
  IN  PI_MODO					        VARCHAR(20),
	IN  PI_ID_ESPACIO_ACADEMICO	INT,
	IN  PI_DESCRIPCION			    VARCHAR(40),
	IN  PI_AFORO				        INT,
	IN  PI_PABELLON				      VARCHAR(20),
  IN  PI_TIPO_ESPACIO			    VARCHAR(4),
  IN  PI_ASIGNABLE			      INT
)
BEGIN
  
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El espacio académico ', PI_ID_ESPACIO_ACADEMICO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_ESPACIO_ACADEMICO(
                  ID_ESPACIO_ACADEMICO,
            			DESCRIPCION,
            			AFORO,
                  PABELLON,
                  TIPO_ESPACIO,
                  ASIGNABLE)
  		    VALUES(
            			PI_ID_ESPACIO_ACADEMICO,
            			PI_DESCRIPCION,
            			PI_AFORO,
                  PI_PABELLON,
                  PI_TIPO_ESPACIO,
                PI_ASIGNABLE);
    WHEN 'UPDATE' THEN
      UPDATE MAE_ESPACIO_ACADEMICO
    		SET
            DESCRIPCION   = PI_DESCRIPCION,
    			  AFORO				  = PI_AFORO,
            PABELLON		  = PI_PABELLON,
            TIPO_ESPACIO  = PI_TIPO_ESPACIO,
            ASIGNABLE	    = PI_ASIGNABLE
    		WHERE ID_ESPACIO_ACADEMICO	= PI_ID_ESPACIO_ACADEMICO;
        CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT(L_DESCRIPCION_ENTIDAD, ' no existe'));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_ESPACIO_ACADEMICO
    		    WHERE ID_ESPACIO_ACADEMICO = PI_ID_ESPACIO_ACADEMICO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT(L_DESCRIPCION_ENTIDAD, ' no existe'));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_ESPACIO_ACADEMICO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_HORARIO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_HORARIO`(
	IN  PI_MODO			      VARCHAR(20),
	IN  PI_ID_HORARIO     INT,
  IN  PI_ID_CURSO	      VARCHAR(20),
	IN  PI_SECCION	      INT,
  IN  PI_DIA            VARCHAR(4),
  IN  PI_HORARIO_INICIO VARCHAR(8),
  IN  PI_HORARIO_FIN    VARCHAR(8)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El horario ', PI_ID_HORARIO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_HORARIO(
                  ID_HORARIO,
                  ID_CURSO,
                  SECCION,
                  DIA,
                  HORARIO_INICIO,
                  HORARIO_FIN)
      		VALUES(
                  PI_ID_HORARIO,
                  PI_ID_CURSO,
                  PI_SECCION,
                  PI_DIA,
                  PI_HORARIO_INICIO,
                  PI_HORARIO_FIN);
    WHEN 'UPDATE' THEN
      UPDATE MAE_HORARIO
      	SET
            DIA             = PI_DIA,
            HORARIO_INICIO  = PI_HORARIO_INICIO,
            HORARIO_FIN     = PI_HORARIO_FIN
		    WHERE ID_HORARIO  = PI_ID_HORARIO
          AND ID_CURSO    = PI_ID_CURSO
          AND SECCION     = PI_SECCION;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_HORARIO
		        WHERE ID_HORARIO  = PI_ID_HORARIO
              AND ID_CURSO    = PI_ID_CURSO
              AND SECCION     = PI_SECCION;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_HORARIO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_HORARIO_DETALLE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_HORARIO_DETALLE`(
	IN    PI_MODO			          VARCHAR(20),
	INOUT PI_ID_HORARIO_DETALLE INT,
  IN	  PI_ID_CURSO	          VARCHAR(20),
	IN    PI_SECCION	          INT,
  IN    PI_ID_HORARIO         INT,
  IN    PI_TIPO_HORARIO       VARCHAR(45),
  IN    PI_HORARIO_INICIO     VARCHAR(8),
  IN    PI_HORARIO_FIN        VARCHAR(8)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El detalle de horario ', PI_ID_CURSO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_HORARIO_DETALLE(
                  ID_HORARIO_DETALLE,
                  ID_CURSO,
                  SECCION,
                  ID_HORARIO,
                  TIPO_HORARIO,
                  HORARIO_INICIO,
                  HORARIO_FIN)
      		VALUES(
                  PI_ID_HORARIO_DETALLE,
                  PI_ID_CURSO,
                  PI_SECCION,
                  PI_ID_HORARIO,
                  PI_TIPO_HORARIO,
                  PI_HORARIO_INICIO,
                  PI_HORARIO_FIN);
    WHEN 'UPDATE' THEN
      UPDATE MAE_HORARIO_DETALLE
      	SET
            TIPO_HORARIO    = PI_TIPO_HORARIO,
            HORARIO_INICIO  = PI_HORARIO_INICIO,
            HORARIO_FIN     = PI_HORARIO_FIN
		    WHERE ID_HORARIO_DETALLE  = PI_ID_HORARIO_DETALLE
          AND ID_CURSO            = PI_ID_CURSO
          AND SECCION             = PI_SECCION
          AND ID_HORARIO          = PI_ID_HORARIO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_HORARIO_DETALLE
		        WHERE ID_HORARIO_DETALLE  = PI_ID_HORARIO_DETALLE
              AND ID_CURSO            = PI_ID_CURSO
              AND SECCION             = PI_SECCION
              AND ID_HORARIO          = PI_ID_HORARIO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_HORARIO_DETALLE');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_MULTITAB_CAB` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_MULTITAB_CAB`(
	IN		PI_MODO				      VARCHAR(20),
	INOUT	PIO_ID_MULTITAB_CAB	INT,
	IN		PI_DESCRIPCION		  VARCHAR(100)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La Multitab Cab ', PIO_ID_MULTITAB_CAB);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_MULTITAB_CAB(
        			    DESCRIPCION)
        	VALUES(
        			    PI_DESCRIPCION);
      SELECT LAST_INSERT_ID() INTO PIO_ID_MULTITAB_CAB;
    WHEN 'UPDATE' THEN
      UPDATE MAE_MULTITAB_CAB
    		SET
    			  DESCRIPCION	= PI_DESCRIPCION
    	WHERE ID_MULTITAB_CAB	= PIO_ID_MULTITAB_CAB;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT(L_DESCRIPCION_ENTIDAD, ' no existe'));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_MULTITAB_CAB
		        WHERE ID_MULTITAB_CAB	= PIO_ID_MULTITAB_CAB;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT(L_DESCRIPCION_ENTIDAD, ' no existe'));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_MULTITAB_CAB');
  END CASE;
  
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_MULTITAB_DET` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_MULTITAB_DET`(
	IN  PI_MODO				      VARCHAR(20),
	IN  PI_ID_MULTITAB_DET  VARCHAR(4),
  IN  PI_ID_MULTITAB_CAB	INT,
	IN  PI_DESCRIPCION_ITEM VARCHAR(50),
  IN  PI_ABREVIATURA		  VARCHAR(10)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asociación entre la Multitab Det ', PI_ID_MULTITAB_DET, ' y el Multitab Cab ', PI_ID_MULTITAB_CAB);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_MULTITAB_DET(
			            ID_MULTITAB_DET,
                  ID_MULTITAB_CAB,
                  DESCRIPCION_ITEM,
                  ABREVIATURA)
		      VALUES(
			            PI_ID_MULTITAB_DET,
                  PI_ID_MULTITAB_CAB,
                  PI_DESCRIPCION_ITEM,
                  PI_ABREVIATURA);
    WHEN 'UPDATE' THEN
      UPDATE MAE_MULTITAB_DET
    	  SET
            DESCRIPCION_ITEM	= PI_DESCRIPCION_ITEM,
            ABREVIATURA			  = PI_ABREVIATURA
    		WHERE ID_MULTITAB_DET	= PI_ID_MULTITAB_DET
    			AND ID_MULTITAB_CAB	= PI_ID_MULTITAB_CAB;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_MULTITAB_DET
        		WHERE ID_MULTITAB_DET	= PI_ID_MULTITAB_DET
        			AND ID_MULTITAB_CAB	= PI_ID_MULTITAB_CAB;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_MULTITAB_DET');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_PARAMETROS_GENERALES` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_PARAMETROS_GENERALES`(
	IN  PI_MODO			VARCHAR(20),
	IN  PI_PERIODO	VARCHAR(20)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El periodo ', PI_PERIODO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'UPDATE' THEN
      UPDATE MAE_PARAMETROS_GENERALES
		    SET
            PERIODO		= PI_PERIODO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_PARAMETROS_GENERALES');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_PLAN` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_PLAN`(
	IN  PI_MODO			    VARCHAR(20),
	IN  PI_ID_PLAN      VARCHAR(20),
  IN  PI_FACULTAD	    VARCHAR(4),
	IN  PI_ESCUELA	    VARCHAR(4),
  IN  PI_ESPECIALIDAD VARCHAR(4),
  IN  PI_DESCRIPCION  VARCHAR(100)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El plan ', PI_ID_PLAN);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_PLAN(
                  ID_PLAN,
                  FACULTAD,
                  ESCUELA,
                  ESPECIALIDAD,
                  DESCRIPCION)
      		VALUES(
                  PI_ID_PLAN,
                  PI_FACULTAD,
                  PI_ESCUELA,
                  PI_ESPECIALIDAD,
                  PI_DESCRIPCION);
    WHEN 'UPDATE' THEN
      UPDATE MAE_PLAN
      	SET
            FACULTAD      = PI_FACULTAD,
            ESCUELA       = PI_ESCUELA,
            ESPECIALIDAD  = PI_ESPECIALIDAD,
            DESCRIPCION   = PI_DESCRIPCION
		    WHERE ID_PLAN  = PI_ID_PLAN;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_PLAN
		        WHERE ID_PLAN  = PI_ID_PLAN;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_PLAN');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_PRE_REQUISITO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_PRE_REQUISITO`(
	IN		PI_MODO							          VARCHAR(20),
	INOUT	PIO_ID_PREREQ					        INT,
	IN		PI_ID_CURSO						        VARCHAR(20),
	IN		PI_ID_CURSO_PRE_REQUISITO		  VARCHAR(20),
	IN		PI_DESCRIPCION_PRE_REQUISITO	VARCHAR(40),
  IN		PI_GRUPO_PRE_REQUISITO			  VARCHAR(40)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El pre-requisito ', PIO_ID_PREREQ);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_PRE_REQUISITO(
            			ID_CURSO,
            			ID_CURSO_PRE_REQUISITO,
            			DESCRIPCION_PRE_REQUISITO,
                  GRUPO_PRE_REQUISITO)
      		VALUES(
            			PI_ID_CURSO,
            			PI_ID_CURSO_PRE_REQUISITO,
            			PI_DESCRIPCION_PRE_REQUISITO,
                  PI_GRUPO_PRE_REQUISITO);
		  SELECT LAST_INSERT_ID() INTO PIO_ID_PREREQ;
    WHEN 'UPDATE' THEN
      UPDATE MAE_PRE_REQUISITO
        SET
      			ID_CURSO 					        = PI_ID_CURSO,
      			ID_CURSO_PRE_REQUISITO		= PI_ID_CURSO_PRE_REQUISITO,
      			DESCRIPCION_PRE_REQUISITO	= PI_DESCRIPCION_PRE_REQUISITO,
            GRUPO_PRE_REQUISITO			  = PI_GRUPO_PRE_REQUISITO
		    WHERE ID_PREREQ	= PIO_ID_PREREQ;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_PRE_REQUISITO
		        WHERE ID_PREREQ = PIO_ID_PREREQ;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_PRE_REQUISITO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_PROGRAMACION` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_PROGRAMACION`(
	IN  PI_MODO			    VARCHAR(20),
	IN  PI_SECCION      INT,
  IN  PI_ID_CURSO	    VARCHAR(20),
	IN  PI_ID_DOCENTE   VARCHAR(20),
  IN  PI_TOPE         INT,
  IN  PI_MATRICULADOS INT,
  IN  PI_TURNO        VARCHAR(4),
  IN  PI_AULA         VARCHAR(20)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asociación entre la sección ', PI_SECCION, ' y el curso ', PI_ID_CURSO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_PROGRAMACION(
                  SECCION,
                  ID_CURSO,
                  ID_DOCENTE,
                  TOPE,
                  MATRICULADOS,
                  TURNO,
                  AULA)
      		VALUES(
                  PI_SECCION,
                  PI_ID_CURSO,
                  PI_ID_DOCENTE,
                  PI_TOPE,
                  PI_MATRICULADOS,
                  PI_TURNO,
                  PI_AULA);
    WHEN 'UPDATE' THEN
      UPDATE MAE_PROGRAMACION
      	SET
            ID_DOCENTE    = PI_ESPECIALIDAD,
            PERIODO       = PI_DESCRIPCION,
            TOPE          = PI_TOPE,
            MATRICULADOS  = PI_MATRICULADOS,
            TURNO         = PI_TURNO,
            AULA          = PI_AULA
		    WHERE SECCION   = PI_SECCION
          AND ID_CURSO  = PI_ID_CURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_PROGRAMACION
		        WHERE SECCION   = PI_SECCION
              AND ID_CURSO  = PI_ID_CURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_PROGRAMACION');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_MAE_SOLICITANTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_MAE_SOLICITANTE`(
	IN		PI_MODO				      VARCHAR(20),
	INOUT	PIO_SOLICITANTE		  INT,
  IN		PI_DNI				      VARCHAR(8),
  IN		PI_NOMBRES			    VARCHAR(40),
	IN		PI_APELLIDO_PATERNO	VARCHAR(40),
  IN		PI_APELLIDO_MATERNO	VARCHAR(40),
  IN		PI_CELULAR			    INT,
  IN		PI_EMAIL			      VARCHAR(50),
  IN		PI_TIPO_SOLICITANTE	VARCHAR(4),
  IN		PI_BASE				      VARCHAR(4),
  IN		PI_ESCUELA			    VARCHAR(4)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El solicitante ', PIO_SOLICITANTE);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;
  
  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO MAE_SOLICITANTE(
                  DNI,
                  NOMBRES,
                  APELLIDO_PATERNO,
                  APELLIDO_MATERNO,
                  CELULAR,
                  EMAIL,
                  TIPO_SOLICITANTE,
                  BASE,
                  ESCUELA)
      		VALUES(
                  PI_DNI,
                  PI_NOMBRES,
                  PI_APELLIDO_PATERNO,
                  PI_APELLIDO_MATERNO,
                  PI_CELULAR,
                  PI_EMAIL,
                  PI_TIPO_SOLICITANTE,
                  PI_BASE,
                  PI_ESCUELA);
		  SELECT LAST_INSERT_ID() INTO PIO_SOLICITANTE;
    WHEN 'UPDATE' THEN
      UPDATE MAE_SOLICITANTE
      	SET
      			DNI					      = PI_DNI,
      			NOMBRES				    = PI_NOMBRES,
            APELLIDO_PATERNO	= PI_APELLIDO_PATERNO,
            APELLIDO_MATERNO  = PI_APELLIDO_MATERNO,
            CELULAR				    = PI_CELULAR,
            EMAIL				      = PI_EMAIL,
            TIPO_SOLICITANTE	= PI_TIPO_SOLICITANTE,
            BASE				      = PI_BASE,
            ESCUELA				    = PI_ESCUELA
		    WHERE ID_SOLICITANTE	= PIO_SOLICITANTE;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM MAE_SOLICITANTE
		        WHERE ID_SOLICITANTE	= PIO_SOLICITANTE;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_MAE_SOLICITANTE');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_SEG_PERFIL` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_SEG_PERFIL`(
	IN		PI_MODO			    VARCHAR(20),
	INOUT	PIO_ID_PERFIL	  INT,
	IN		PI_DESCRIPCION  VARCHAR(50)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El perfil ', PIO_ID_PERFIL);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO SEG_PERFIL(
      			      DESCRIPCION)
      		VALUES(
      			      PI_DESCRIPCION);
    WHEN 'UPDATE' THEN
      UPDATE SEG_PERFIL
    		SET
            DESCRIPCION	= PI_DESCRIPCION
    	  WHERE ID_PERFIL	= PIO_ID_PERFIL;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM SEG_PERFIL
		        WHERE ID_PERFIL	= PIO_ID_PERFIL;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_SEG_PERFIL');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_SEG_PERFIL_RECURSO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_SEG_PERFIL_RECURSO`(
	IN		PI_MODO					      VARCHAR(20),
	INOUT	PIO_ID_PERFIL_RECURSO	INT,
  IN		PI_ID_RECURSO			    VARCHAR(20),
	IN		PI_ID_PERFIL			    INT
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asociación entre el perfil ', PI_ID_PERFIL, ' y el recurso ', PI_ID_RECURSO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO SEG_PERFIL_RECURSO(
      			      ID_RECURSO,
                  ID_PERFIL)
      		VALUES(
      			      PI_ID_RECURSO,
                  PI_ID_PERFIL);
      SELECT LAST_INSERT_ID() INTO PIO_ID_PERFIL_RECURSO;
    WHEN 'UPDATE' THEN
      UPDATE SEG_PERFIL_RECURSO
    		SET
            ID_RECURSO  = PI_ID_RECURSO,
            ID_PERFIL 	= PI_ID_PERFIL
		    WHERE ID_PERFIL_RECURSO	= PIO_ID_PERFIL_RECURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM SEG_PERFIL_RECURSO
		        WHERE ID_PERFIL	= PIO_ID_PERFIL_RECURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_SEG_PERFIL_RECURSO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_SEG_PERFIL_USUARIO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_SEG_PERFIL_USUARIO`(
	IN		PI_MODO					      VARCHAR(20),
	INOUT	PIO_ID_USUARIO_PERFIL	INT,
  IN		PI_USERNAME				    VARCHAR(20),
	IN		PI_ID_PERFIL		    	INT
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('La asociación entre el perfil ', PI_ID_PERFIL, ' y el usuario ', PI_USERNAME);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO SEG_PERFIL_USUARIO(
      			      USERNAME,
                  ID_PERFIL)
      		VALUES(
      			      PI_USERNAME,
                  PI_ID_PERFIL);
	  	SELECT LAST_INSERT_ID() INTO PIO_ID_USUARIO_PERFIL;
    WHEN 'UPDATE' THEN
      UPDATE SEG_PERFIL_USUARIO
		    SET
            USERNAME	= PI_USERNAME,
            ID_PERFIL	= PI_ID_PERFIL
		    WHERE ID_USUARIO_PERFIL	= PIO_ID_USUARIO_PERFIL;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM SEG_PERFIL_USUARIO
		        WHERE ID_USUARIO_PERFIL	= PIO_ID_USUARIO_PERFIL;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_SEG_PERFIL_USUARIO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_SEG_RECURSO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_SEG_RECURSO`(
	IN  PI_MODO					        VARCHAR(20),
	IN  PI_ID_RECURSO			      VARCHAR(20),
  IN  PI_ID_CATEGORIA_RECURSO	VARCHAR(40),
	IN  PI_DESCRIPCION			    VARCHAR(100)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El recurso ', PI_ID_RECURSO);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO SEG_RECURSO(
      			      ID_RECURSO,
                  ID_CATEGORIA_RECURSO,
                  DESCRIPCION)
		      VALUES(
			            PI_ID_RECURSO,
                  PI_ID_CATEGORIA_RECURSO,
                  PI_DESCRIPCION);
    WHEN 'UPDATE' THEN
      UPDATE SEG_RECURSO
		    SET
			      ID_CATEGORIA_RECURSO  = PI_ID_CATEGORIA_RECURSO,
            DESCRIPCION				    = PI_DESCRIPCION
		    WHERE ID_RECURSO	= PI_ID_RECURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM SEG_RECURSO
		        WHERE ID_RECURSO	= PI_ID_RECURSO;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_SEG_RECURSO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `PRC_MANT_SEG_USUARIO` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`sisgea`@`%` PROCEDURE `PRC_MANT_SEG_USUARIO`(
	IN  PI_MODO			  VARCHAR(20),
	IN  PI_USERNAME	  VARCHAR(20),
  IN  PI_NOMBRES		VARCHAR(40),
	IN  PI_APELLIDOS	VARCHAR(40),
  IN  PI_PASSWORD		VARCHAR(45)
)
BEGIN
  DECLARE L_DESCRIPCION_ENTIDAD VARCHAR(500) DEFAULT CONCAT('El usuario ', PI_USERNAME);

  # Declaración de variables de excepciones
  DECLARE EX_DUP_VAL_IN_INDEX   CONDITION FOR 1062;
  DECLARE EX_CHILD_RECORD_FOUND CONDITION FOR 1451;
  DECLARE EX_PARENT_NO_FOUND    CONDITION FOR 1452;

  # Manejadores de las variables de excepciones
  DECLARE EXIT HANDLER FOR EX_DUP_VAL_IN_INDEX
  BEGIN
    CALL PRC_EXC_CLASE_DUPLICADA(CONCAT(L_DESCRIPCION_ENTIDAD, ' ya existe'));
  END;
  DECLARE EXIT HANDLER FOR EX_CHILD_RECORD_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_HIJO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser eliminado porque está en uso'));
  END;
  DECLARE EXIT HANDLER FOR EX_PARENT_NO_FOUND
  BEGIN
    CALL PRC_EXC_REGISTRO_PADRE_NO_ENCONTRADO(CONCAT(L_DESCRIPCION_ENTIDAD, ' no puede ser registrado o actualizado porque hace referencia a una entidad no existente'));
  END;

  CASE PI_MODO
    WHEN 'INSERT' THEN
      INSERT INTO SEG_USUARIO(
				  USERNAME,
                  NOMBRES,
                  APELLIDOS,
                  PASSWORD)
      		VALUES(
				  PI_USERNAME,
                  PI_NOMBRES,
                  PI_APELLIDOS,
                  MD5(PI_PASSWORD));
    WHEN 'UPDATE' THEN
      UPDATE SEG_USUARIO
		    SET
            NOMBRES		= PI_NOMBRES,
            APELLIDOS	= PI_APELLIDOS,
            PASSWORD 	= MD5(PI_PASSWORD)
		    WHERE USERNAME	= PI_USERNAME;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    WHEN 'DELETE' THEN
      DELETE FROM SEG_USUARIO
		        WHERE USERNAME  = PI_USERNAME;
      CALL PRC_EXC_OPERACION_NO_REALIZADA(ROW_COUNT(), CONCAT('No existe la ', L_DESCRIPCION_ENTIDAD));
    ELSE
      CALL PRC_EXC_CASE_NO_ENCONTRADO(PI_MODO, 'PRC_MANT_SEG_USUARIO');
  END CASE;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Final view structure for view `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_CON_ASIGNACION_ESPACIO_ACADEMICO` AS select `ROWNUM`() AS `ID`,`A`.`ID_ASIGNACION` AS `ID_ASIGNACION`,`A`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`B`.`CICLO` AS `CICLO`,`A`.`ID_CURSO` AS `ID_CURSO`,`B`.`DESCRIPCION` AS `CURSO`,`A`.`SECCION` AS `SECCION`,`C`.`ID_DOCENTE` AS `ID_DOCENTE`,concat(`D`.`NOMBRES`,' ',`D`.`APELLIDOS`) AS `NOMBRES_DOCENTE`,`C`.`TOPE` AS `TOPE`,`C`.`MATRICULADOS` AS `MATRICULADOS`,`C`.`TURNO` AS `TURNO`,`E`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TURNO`,`F`.`TIPO_HORARIO` AS `TIPO_HORARIO`,`G`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_HORARIO`,`H`.`DIA` AS `DIA`,`I`.`DESCRIPCION_ITEM` AS `DESCRIPCION_DIA`,`A`.`ID_HORARIO` AS `ID_HORARIO`,`A`.`ID_HORARIO_DETALLE` AS `ID_HORARIO_DETALLE`,`A`.`HORARIO_INICIO` AS `HORARIO_INICIO`,`A`.`HORARIO_FIN` AS `HORARIO_FIN`,`J`.`DESCRIPCION` AS `ESPACIO` from (((((((((`MOV_ASIGNACION_RECURSO` `A` join `MAE_PROGRAMACION` `C` on(((`C`.`SECCION` = `A`.`SECCION`) and (`A`.`ID_CURSO` = `C`.`ID_CURSO`)))) join `MAE_HORARIO_DETALLE` `F` on((`F`.`ID_HORARIO_DETALLE` = `A`.`ID_HORARIO_DETALLE`))) join `MAE_HORARIO` `H` on((`F`.`ID_HORARIO` = `H`.`ID_HORARIO`))) join `MAE_CURSO` `B` on((`B`.`ID_CURSO` = `C`.`ID_CURSO`))) join `MAE_DOCENTE` `D` on((`C`.`ID_DOCENTE` = `D`.`ID_DOCENTE`))) left join `MAE_MULTITAB_DET` `E` on(((`C`.`TURNO` = `E`.`ID_MULTITAB_DET`) and (`E`.`ID_MULTITAB_CAB` = 10)))) left join `MAE_MULTITAB_DET` `G` on(((`F`.`TIPO_HORARIO` = `G`.`ID_MULTITAB_DET`) and (`G`.`ID_MULTITAB_CAB` = 5)))) left join `MAE_MULTITAB_DET` `I` on(((`H`.`DIA` = `I`.`ID_MULTITAB_DET`) and (`I`.`ID_MULTITAB_CAB` = 11)))) left join `MAE_ESPACIO_ACADEMICO` `J` on((`A`.`ID_ESPACIO_ACADEMICO` = `J`.`ID_ESPACIO_ACADEMICO`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS`
--

/*!50001 DROP VIEW IF EXISTS `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_CON_ESTADO_ESPACIOS_ACADEMICOS` AS with recursive `LISTAHORAS` as (select 8 AS `HORA` union all select (`LISTAHORAS`.`HORA` + 1) AS `HORA` from `LISTAHORAS` where (`LISTAHORAS`.`HORA` < 21)) select `ROWNUM`() AS `ID`,`AR`.`ID_ASIGNACION` AS `ID_ASIGNACION`,concat(convert(time_format(sec_to_time(((`LISTA`.`HORA` * 60) * 60)),'%H:%i') using utf8mb4),'-',convert(time_format(sec_to_time((((`LISTA`.`HORA` + 1) * 60) * 60)),'%H:%i') using utf8mb4)) AS `HORARIO`,`ESP`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`ESP`.`DESCRIPCION` AS `DESCRIPCION_ESPACIO_ACADEMICO`,`AR`.`ID_CURSO` AS `ID_CURSO`,`AR`.`DESCRIPCION_CURSO` AS `DESCRIPCION_CURSO`,`AR`.`TIPO` AS `TIPO`,`AR`.`DIA` AS `DIA`,`AR`.`TIPO_HORARIO` AS `TIPO_HORARIO` from ((`LISTAHORAS` `LISTA` join `MAE_ESPACIO_ACADEMICO` `ESP`) left join (select `MAR`.`ID_ASIGNACION` AS `ID_ASIGNACION`,`MAR`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`MAR`.`ID_HORARIO` AS `ID_HORARIO`,`MAR`.`ID_HORARIO_DETALLE` AS `ID_HORARIO_DETALLE`,`MAR`.`ID_CURSO` AS `ID_CURSO`,`CUR`.`DESCRIPCION` AS `DESCRIPCION_CURSO`,`MAR`.`HORARIO_INICIO` AS `HORARIO_INICIO`,`MAR`.`HORARIO_FIN` AS `HORARIO_FIN`,'ASIGNACION' AS `TIPO`,`HR`.`DIA` AS `DIA`,`HD`.`TIPO_HORARIO` AS `TIPO_HORARIO` from (((`MOV_ASIGNACION_RECURSO` `MAR` left join `MAE_CURSO` `CUR` on((`CUR`.`ID_CURSO` = `MAR`.`ID_CURSO`))) left join `MAE_HORARIO` `HR` on((`HR`.`ID_HORARIO` = `MAR`.`ID_HORARIO`))) left join `MAE_HORARIO_DETALLE` `HD` on((`HD`.`ID_HORARIO_DETALLE` = `MAR`.`ID_HORARIO_DETALLE`))) union all select `MOS`.`ID_SOLICITUD` AS `ID_ASIGNACION`,`MOS`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,NULL AS `ID_HORARIO`,NULL AS `ID_HORARIO_DETALLE`,'PR' AS `ID_CURSO`,concat('RESERVA DE: ',`MAS`.`DNI`,' - ',`MAS`.`APELLIDO_PATERNO`,', ',`MAS`.`APELLIDO_MATERNO`) AS `DESCRIPCION_CURSO`,`MOS`.`HORA_INICIO` AS `HORARIO_INICIO`,`MOS`.`HORA_FIN` AS `HORARIO_FIN`,'SOLICITUD' AS `TIPO`,concat(elt((weekday(`MOS`.`FECHA_RESERVA`) + 1),'LU','MA','MI','JU','VI','SA','DO')) AS `DIA`,'R' AS `TIPO_HORARIO` from (`MOV_SOLICITUD` `MOS` left join `MAE_SOLICITANTE` `MAS` on((`MOS`.`ID_SOLICITANTE` = `MAS`.`ID_SOLICITANTE`)))) `AR` on(((`LISTA`.`HORA` between `AR`.`HORARIO_INICIO` and (`AR`.`HORARIO_FIN` - 1)) and (`ESP`.`ID_ESPACIO_ACADEMICO` = `AR`.`ID_ESPACIO_ACADEMICO`)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MANT_MAE_PARAMETROS_GENERALES`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MANT_MAE_PARAMETROS_GENERALES`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MANT_MAE_PARAMETROS_GENERALES` AS select `MAE_PARAMETROS_GENERALES`.`PERIODO` AS `PERIODO` from `MAE_PARAMETROS_GENERALES` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_CURSO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_CURSO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_CURSO` AS select `a`.`ID_PLAN` AS `ID_PLAN`,`a`.`ID_CURSO` AS `ID_CURSO`,`a`.`CICLO` AS `CICLO`,`a`.`ESPECIALIDAD` AS `ESPECIALIDAD`,`a`.`DESCRIPCION` AS `DESCRIPCION`,`a`.`CREDITAJE` AS `CREDITAJE`,`a`.`TIPO` AS `TIPO`,`a`.`GRUPO` AS `GRUPO` from `MAE_CURSO` `a` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_DOCENTE`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_DOCENTE`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_DOCENTE` AS select `a`.`ID_DOCENTE` AS `ID_DOCENTE`,`a`.`NOMBRES` AS `NOMBRES`,`a`.`APELLIDOS` AS `APELLIDOS`,`a`.`TIPO` AS `TIPO` from `MAE_DOCENTE` `a` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_ESPACIO_ACADEMICO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_ESPACIO_ACADEMICO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_ESPACIO_ACADEMICO` AS select `a`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`a`.`DESCRIPCION` AS `DESCRIPCION_ESPACIO_ACADEMICO`,`a`.`AFORO` AS `AFORO`,`a`.`PABELLON` AS `PABELLON`,`c`.`DESCRIPCION_ITEM` AS `DESCRIPCION_PABELLON`,`a`.`TIPO_ESPACIO` AS `TIPO_ESPACIO`,`b`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_ESPACIO`,`a`.`ASIGNABLE` AS `ASIGNABLE` from ((`MAE_ESPACIO_ACADEMICO` `a` left join `MAE_MULTITAB_DET` `b` on(((`a`.`TIPO_ESPACIO` = `b`.`ID_MULTITAB_DET`) and (`b`.`ID_MULTITAB_CAB` = 1)))) left join `MAE_MULTITAB_DET` `c` on(((`a`.`PABELLON` = `c`.`ID_MULTITAB_DET`) and (`c`.`ID_MULTITAB_CAB` = 12)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_HORARIO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_HORARIO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_HORARIO` AS select `a`.`ID_HORARIO` AS `ID_HORARIO`,`a`.`ID_CURSO` AS `ID_CURSO`,`b`.`DESCRIPCION` AS `DESC_CURSO`,`a`.`SECCION` AS `SECCION`,`a`.`DIA` AS `DIA`,`a`.`HORARIO_INICIO` AS `HORARIO_INICIO`,`a`.`HORARIO_FIN` AS `HORARIO_FIN` from (`MAE_HORARIO` `a` left join `MAE_CURSO` `b` on((`b`.`ID_CURSO` = `a`.`ID_CURSO`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_HORARIO_DETALLE`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_HORARIO_DETALLE`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_HORARIO_DETALLE` AS select `a`.`ID_HORARIO_DETALLE` AS `ID_HORARIO_DETALLE`,`a`.`ID_CURSO` AS `ID_CURSO`,`b`.`DESCRIPCION` AS `DESC_CURSO`,`a`.`SECCION` AS `SECCION`,`a`.`ID_HORARIO` AS `ID_HORARIO`,concat(`b`.`DESCRIPCION`,'-',`c`.`DIA`) AS `DESCRIPCION_HORARIO`,`a`.`TIPO_HORARIO` AS `TIPO_HORARIO`,`d`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_HORARIO`,`a`.`HORARIO_INICIO` AS `HORARIO_INICIO`,`a`.`HORARIO_FIN` AS `HORARIO_FIN` from (((`MAE_HORARIO_DETALLE` `a` left join `MAE_CURSO` `b` on((`b`.`ID_CURSO` = `a`.`ID_CURSO`))) left join `MAE_HORARIO` `c` on((`c`.`ID_HORARIO` = `a`.`ID_HORARIO`))) left join `MAE_MULTITAB_DET` `d` on(((`d`.`ID_MULTITAB_DET` = `a`.`TIPO_HORARIO`) and (`d`.`ID_MULTITAB_CAB` = 5)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_MULTITAB_CAB`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_MULTITAB_CAB`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_MULTITAB_CAB` AS select `a`.`ID_MULTITAB_CAB` AS `ID_MULTITAB_CAB`,`a`.`DESCRIPCION` AS `DESCRIPCION_MULTITAB_CAB` from `MAE_MULTITAB_CAB` `a` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_MULTITAB_DET`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_MULTITAB_DET`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_MULTITAB_DET` AS select `a`.`ID_MULTITAB_CAB` AS `ID_MULTITAB_CAB`,`b`.`DESCRIPCION` AS `DESCRIPCION_MULTITAB_CAB`,`a`.`ID_MULTITAB_DET` AS `ID_MULTITAB_DET`,`a`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ITEM`,`a`.`ABREVIATURA` AS `ABREVIATURA` from (`MAE_MULTITAB_DET` `a` left join `MAE_MULTITAB_CAB` `b` on((`a`.`ID_MULTITAB_CAB` = `b`.`ID_MULTITAB_CAB`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_PLAN_ACADEMICO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_PLAN_ACADEMICO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_PLAN_ACADEMICO` AS select `a`.`ID_PLAN` AS `ID_PLAN`,`a`.`DESCRIPCION` AS `DESCRIPCION_PLAN`,`a`.`FACULTAD` AS `FACULTAD`,`a`.`ESCUELA` AS `ESCUELA`,`b`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ESCUELA`,`a`.`ESPECIALIDAD` AS `ESPECIALIDAD` from (`MAE_PLAN` `a` left join `MAE_MULTITAB_DET` `b` on(((`a`.`ESCUELA` = `b`.`ID_MULTITAB_DET`) and (`b`.`ID_MULTITAB_CAB` = 3)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_PROGRAMACION_ACADEMICA`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_PROGRAMACION_ACADEMICA`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_PROGRAMACION_ACADEMICA` AS select `a`.`ID_CURSO` AS `ID_CURSO`,`b`.`DESCRIPCION` AS `DESCRIPCION_CURSO`,`a`.`SECCION` AS `SECCION`,`a`.`ID_DOCENTE` AS `ID_DOCENTE`,concat(`c`.`NOMBRES`,' ',`c`.`APELLIDOS`) AS `NOMBRES_DOCENTE`,`a`.`TOPE` AS `TOPE`,`a`.`MATRICULADOS` AS `MATRICULADOS`,`a`.`TURNO` AS `TURNO`,`d`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TURNO`,`a`.`AULA` AS `AULA` from (((`MAE_PROGRAMACION` `a` left join `MAE_CURSO` `b` on((`a`.`ID_CURSO` = `b`.`ID_CURSO`))) left join `MAE_DOCENTE` `c` on((`a`.`ID_DOCENTE` = `c`.`ID_DOCENTE`))) left join `MAE_MULTITAB_DET` `d` on(((`a`.`TURNO` = `d`.`ID_MULTITAB_DET`) and (`d`.`ID_MULTITAB_CAB` = 10)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SEG_PERFIL`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SEG_PERFIL` AS select `SEG_PERFIL`.`ID_PERFIL` AS `ID_PERFIL`,`SEG_PERFIL`.`DESCRIPCION` AS `DESCRIPCION_PERFIL` from `SEG_PERFIL` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SEG_PERFIL_RECURSO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL_RECURSO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SEG_PERFIL_RECURSO` AS select `A`.`ID_PERFIL_RECURSO` AS `ID_PERFIL_RECURSO`,`A`.`ID_RECURSO` AS `ID_RECURSO`,`B`.`ID_CATEGORIA_RECURSO` AS `ID_CATEGORIA_RECURSO`,`D`.`DESCRIPCION_ITEM` AS `DESCRIPCION_CATEGORIA_RECURSO`,`B`.`DESCRIPCION` AS `DESCRIPCION_RECURSO`,`A`.`ID_PERFIL` AS `ID_PERFIL`,`C`.`DESCRIPCION` AS `DESCRIPCION_PERFIL` from (((`SEG_PERFIL_RECURSO` `A` left join `SEG_RECURSO` `B` on((`B`.`ID_RECURSO` = `A`.`ID_RECURSO`))) left join `SEG_PERFIL` `C` on((`C`.`ID_PERFIL` = `A`.`ID_PERFIL`))) left join `MAE_MULTITAB_DET` `D` on(((`B`.`ID_CATEGORIA_RECURSO` = `D`.`ID_MULTITAB_DET`) and (`D`.`ID_MULTITAB_CAB` = 15)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SEG_PERFIL_USUARIO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_PERFIL_USUARIO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SEG_PERFIL_USUARIO` AS select `A`.`ID_USUARIO_PERFIL` AS `ID_PERFIL_USUARIO`,`A`.`USERNAME` AS `USUARIO`,`B`.`NOMBRES` AS `NOMBRES`,`B`.`APELLIDOS` AS `APELLIDOS`,`A`.`ID_PERFIL` AS `ID_PERFIL`,`C`.`DESCRIPCION` AS `DESCRIPCION_PERFIL` from ((`SEG_PERFIL_USUARIO` `A` left join `SEG_USUARIO` `B` on((`B`.`USERNAME` = `A`.`USERNAME`))) left join `SEG_PERFIL` `C` on((`C`.`ID_PERFIL` = `A`.`ID_PERFIL`))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SEG_RECURSO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_RECURSO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SEG_RECURSO` AS select `A`.`ID_RECURSO` AS `ID_RECURSO`,`A`.`ID_CATEGORIA_RECURSO` AS `ID_CATEGORIA_RECURSO`,`B`.`DESCRIPCION_ITEM` AS `DESCRIPCION_CATEGORIA_RECURSO`,`A`.`DESCRIPCION` AS `DESCRIPCION_RECURSO` from (`SEG_RECURSO` `A` left join `MAE_MULTITAB_DET` `B` on(((`A`.`ID_CATEGORIA_RECURSO` = `B`.`ID_MULTITAB_DET`) and (`B`.`ID_MULTITAB_CAB` = 15)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SEG_USUARIO`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SEG_USUARIO`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SEG_USUARIO` AS select `SEG_USUARIO`.`USERNAME` AS `USUARIO`,sha(`SEG_USUARIO`.`PASSWORD`) AS `CONTRASENIA`,`SEG_USUARIO`.`NOMBRES` AS `NOMBRES`,`SEG_USUARIO`.`APELLIDOS` AS `APELLIDOS` from `SEG_USUARIO` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_MAN_SOLICITANTE`
--

/*!50001 DROP VIEW IF EXISTS `VIE_MAN_SOLICITANTE`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`root`@`localhost` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_MAN_SOLICITANTE` AS select `a`.`ID_SOLICITANTE` AS `ID_SOLICITANTE`,`a`.`DNI` AS `DNI`,`a`.`NOMBRES` AS `NOMBRES`,`a`.`APELLIDO_PATERNO` AS `APELLIDO_PATERNO`,`a`.`APELLIDO_MATERNO` AS `APELLIDO_MATERNO`,`a`.`CELULAR` AS `CELULAR`,`a`.`EMAIL` AS `EMAIL`,`a`.`TIPO_SOLICITANTE` AS `TIPO_SOLICITANTE`,`b`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_SOLICITANTE`,`a`.`BASE` AS `BASE`,`d`.`DESCRIPCION_ITEM` AS `DESCRIPCION_BASE`,`a`.`ESCUELA` AS `ESCUELA`,`c`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ESCUELA` from (((`MAE_SOLICITANTE` `a` left join `MAE_MULTITAB_DET` `b` on(((`a`.`TIPO_SOLICITANTE` = `b`.`ID_MULTITAB_DET`) and (`b`.`ID_MULTITAB_CAB` = 6)))) left join `MAE_MULTITAB_DET` `d` on(((`a`.`BASE` = `d`.`ID_MULTITAB_DET`) and (`d`.`ID_MULTITAB_CAB` = 9)))) left join `MAE_MULTITAB_DET` `c` on(((`a`.`ESCUELA` = `c`.`ID_MULTITAB_DET`) and (`c`.`ID_MULTITAB_CAB` = 3)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_REP_SOLICITUDES`
--

/*!50001 DROP VIEW IF EXISTS `VIE_REP_SOLICITUDES`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8mb4 */;
/*!50001 SET character_set_results     = utf8mb4 */;
/*!50001 SET collation_connection      = utf8mb4_0900_ai_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_REP_SOLICITUDES` AS select `ROWNUM`() AS `ID`,`A`.`ID_SOLICITANTE` AS `ID_SOLICITANTE`,`F`.`DNI` AS `DNI`,concat(`F`.`NOMBRES`,' ',`F`.`APELLIDO_PATERNO`,' ',`F`.`APELLIDO_MATERNO`) AS `NOMBRE_COMPLETO`,`A`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`B`.`DESCRIPCION` AS `DESCRIPCION_ESPACIO_ACADEMICO`,`B`.`PABELLON` AS `ID_PABELLON`,concat('PABELLON ',`B`.`PABELLON`) AS `DESCRIPCION_PABELLON`,`B`.`TIPO_ESPACIO` AS `TIPO_ESPACIO`,`G`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_ESPACIO`,`A`.`ESTADO_SOLICITUD` AS `ESTADO_SOLICITUD`,`C`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ESTADO_SOLICITUD`,`A`.`TIPO_SOLICITUD` AS `TIPO_SOLICITUD`,`D`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_SOLICITUD`,`A`.`MOTIVO` AS `MOTIVO`,`A`.`FECHA_REGISTRO` AS `FECHA_REGISTRO`,`A`.`FECHA_RESERVA` AS `FECHA_RESERVA`,`A`.`HORA_INICIO` AS `HORA_INICIO`,`A`.`HORA_FIN` AS `HORA_FIN`,`A`.`ESTADO_ASISTENCIA` AS `ESTADO_ASISTENCIA`,`E`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ESTADO_ASISTENCIA`,count(0) AS `CANTIDAD` from ((((((`MOV_SOLICITUD` `A` left join `MAE_ESPACIO_ACADEMICO` `B` on((`B`.`ID_ESPACIO_ACADEMICO` = `A`.`ID_ESPACIO_ACADEMICO`))) left join `MAE_MULTITAB_DET` `C` on(((`C`.`ID_MULTITAB_DET` = `A`.`ESTADO_SOLICITUD`) and (`C`.`ID_MULTITAB_CAB` = 7)))) left join `MAE_MULTITAB_DET` `D` on(((`D`.`ID_MULTITAB_DET` = `A`.`TIPO_SOLICITUD`) and (`D`.`ID_MULTITAB_CAB` = 8)))) left join `MAE_MULTITAB_DET` `E` on(((`E`.`ID_MULTITAB_DET` = `A`.`ESTADO_ASISTENCIA`) and (`E`.`ID_MULTITAB_CAB` = 13)))) left join `MAE_SOLICITANTE` `F` on((`F`.`ID_SOLICITANTE` = `A`.`ID_SOLICITANTE`))) left join `MAE_MULTITAB_DET` `G` on(((`G`.`ID_MULTITAB_DET` = `B`.`TIPO_ESPACIO`) and (`G`.`ID_MULTITAB_CAB` = 1)))) group by `A`.`ID_SOLICITANTE`,`F`.`DNI`,concat(`F`.`NOMBRES`,' ',`F`.`APELLIDO_PATERNO`,' ',`F`.`APELLIDO_MATERNO`),`A`.`ID_ESPACIO_ACADEMICO`,`B`.`DESCRIPCION`,`B`.`PABELLON`,concat('PABELLON ',`B`.`PABELLON`),`B`.`TIPO_ESPACIO`,`G`.`DESCRIPCION_ITEM`,`A`.`ESTADO_SOLICITUD`,`C`.`DESCRIPCION_ITEM`,`A`.`TIPO_SOLICITUD`,`D`.`DESCRIPCION_ITEM`,`A`.`MOTIVO`,`A`.`FECHA_REGISTRO`,`A`.`FECHA_RESERVA`,`A`.`HORA_INICIO`,`A`.`HORA_FIN`,`A`.`ESTADO_ASISTENCIA`,`E`.`DESCRIPCION_ITEM` */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;

--
-- Final view structure for view `VIE_SOLICITUD`
--

/*!50001 DROP VIEW IF EXISTS `VIE_SOLICITUD`*/;
/*!50001 SET @saved_cs_client          = @@character_set_client */;
/*!50001 SET @saved_cs_results         = @@character_set_results */;
/*!50001 SET @saved_col_connection     = @@collation_connection */;
/*!50001 SET character_set_client      = utf8 */;
/*!50001 SET character_set_results     = utf8 */;
/*!50001 SET collation_connection      = utf8_general_ci */;
/*!50001 CREATE ALGORITHM=UNDEFINED */
/*!50013 DEFINER=`sisgea`@`%` SQL SECURITY DEFINER */
/*!50001 VIEW `VIE_SOLICITUD` AS select `A`.`ID_SOLICITUD` AS `ID_SOLICITUD`,`A`.`ID_ESPACIO_ACADEMICO` AS `ID_ESPACIO_ACADEMICO`,`C`.`DESCRIPCION` AS `DESCRIPCION_ESPACIO_ACADEMICO`,`A`.`ID_SOLICITANTE` AS `ID_SOLICITANTE`,`B`.`DNI` AS `DNI`,`B`.`NOMBRES` AS `NOMBRES`,`B`.`APELLIDO_PATERNO` AS `APELLIDO_PATERNO`,`B`.`APELLIDO_MATERNO` AS `APELLIDO_MATERNO`,`A`.`ESTADO_SOLICITUD` AS `ESTADO_SOLICITUD`,`D`.`DESCRIPCION_ITEM` AS `DESCRIPCION_ESTADO_SOLICITUD`,`A`.`TIPO_SOLICITUD` AS `TIPO_SOLICITUD`,`E`.`DESCRIPCION_ITEM` AS `DESCRIPCION_TIPO_SOLICITUD`,`A`.`MOTIVO` AS `MOTIVO`,`A`.`FECHA_REGISTRO` AS `FECHA_REGISTRO`,`A`.`FECHA_RESERVA` AS `FECHA_RESERVA`,`A`.`HORA_INICIO` AS `HORA_INICIO`,`A`.`HORA_FIN` AS `HORA_FIN`,`A`.`ESTADO_ASISTENCIA` AS `ESTADO_ASISTENCIA`,`A`.`NOMBRE_ARCHIVO` AS `NOMBRE_ARCHIVO`,`A`.`ARCHIVO` AS `ARCHIVO` from ((((`MOV_SOLICITUD` `A` left join `MAE_SOLICITANTE` `B` on((`A`.`ID_SOLICITANTE` = `B`.`ID_SOLICITANTE`))) left join `MAE_ESPACIO_ACADEMICO` `C` on((`A`.`ID_ESPACIO_ACADEMICO` = `C`.`ID_ESPACIO_ACADEMICO`))) left join `MAE_MULTITAB_DET` `D` on(((`A`.`ESTADO_SOLICITUD` = `D`.`ID_MULTITAB_DET`) and (`D`.`ID_MULTITAB_CAB` = 7)))) left join `MAE_MULTITAB_DET` `E` on(((`A`.`TIPO_SOLICITUD` = `E`.`ID_MULTITAB_DET`) and (`E`.`ID_MULTITAB_CAB` = 8)))) */;
/*!50001 SET character_set_client      = @saved_cs_client */;
/*!50001 SET character_set_results     = @saved_cs_results */;
/*!50001 SET collation_connection      = @saved_col_connection */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2020-03-01 19:12:13
